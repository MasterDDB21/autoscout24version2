!function i(o,r,s){function a(e,t){if(!r[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=r[e]={exports:{}},o[e][0].call(n.exports,function(t){return a(o[e][1][t]||t)},n,n.exports,i,o,r,s)}return r[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(H,n,i){!function(F,N){!function(){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var t,e;t=this,e=function(){"use strict";function c(t){return"function"==typeof t}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,e=void 0,o=void 0,s=function(t,e){u[i]=t,u[i+1]=e,2===(i+=2)&&(o?o(p):y())};var t="undefined"!=typeof window?window:void 0,r=t||{},a=r.MutationObserver||r.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==F&&"[object process]"==={}.toString.call(F),r="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(p,1)}}var u=new Array(1e3);function p(){for(var t=0;t<i;t+=2)(0,u[t])(u[t+1]),u[t]=void 0,u[t+1]=void 0;i=0}function g(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:d()}catch(t){return d()}}var h,m,f,v,y=void 0;function w(t,e){var n=this,i=new this.constructor(S);void 0===i[M]&&L(i);var o,r=n._state;return r?(o=arguments[r-1],s(function(){return D(r,i,o,n._result)})):R(n,i,t,e),i}function b(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(S);return A(e,t),e}var y=l?function(){return F.nextTick(p)}:a?(m=0,f=new a(p),v=document.createTextNode(""),f.observe(v,{characterData:!0}),function(){v.data=m=++m%2}):r?((h=new MessageChannel).port1.onmessage=p,function(){return h.port2.postMessage(0)}):(void 0===t&&"function"==typeof H?g:d)(),M=Math.random().toString(36).substring(2);function S(){}var I=void 0,C=1,T=2;function E(t,i,o){s(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(o,i,function(t){n||(n=!0,(i!==t?A:k)(e,t))},function(t){n||(n=!0,x(e,t))},e._label);!n&&t&&(n=!0,x(e,t))},t)}function P(t,e,n){var i,o;e.constructor===t.constructor&&n===w&&e.constructor.resolve===b?(i=t,(o=e)._state===C?k(i,o._result):o._state===T?x(i,o._result):R(o,void 0,function(t){return A(i,t)},function(t){return x(i,t)})):void 0!==n&&c(n)?E(t,e,n):k(t,e)}function A(e,t){if(e===t)x(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)k(e,t);else{n=void 0;try{n=t.then}catch(t){return void x(e,t)}P(e,t,n)}var n}function U(t){t._onerror&&t._onerror(t._result),_(t)}function k(t,e){t._state===I&&(t._result=e,t._state=C,0!==t._subscribers.length&&s(_,t))}function x(t,e){t._state===I&&(t._state=T,t._result=e,s(U,t))}function R(t,e,n,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+C]=n,o[r+T]=i,0===r&&t._state&&s(_,t)}function _(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,o=void 0,r=t._result,s=0;s<e.length;s+=3)i=e[s],o=e[s+n],i?D(n,i,o,r):o(r);t._subscribers.length=0}}function D(t,e,n,i){var o=c(n),r=void 0,s=void 0,a=!0;if(o){try{r=n(i)}catch(t){a=!1,s=t}if(e===r)return void x(e,new TypeError("A promises callback cannot return that same promise."))}else r=i;e._state!==I||(o&&a?A(e,r):!1===a?x(e,s):t===C?k(e,r):t===T&&x(e,r))}var B=0;function L(t){t[M]=B++,t._state=void 0,t._result=void 0,t._subscribers=[]}var z=(O.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},O.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===b){var o,r=void 0,s=void 0,a=!1;try{r=e.then}catch(t){a=!0,s=t}r===w&&e._state!==I?this._settledAt(e._state,t,e._result):"function"!=typeof r?(this._remaining--,this._result[t]=e):n===V?(o=new n(S),a?x(o,s):P(o,e,r),this._willSettleAt(o,t)):this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},O.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===I&&(this._remaining--,t===T?x(i,n):this._result[e]=n),0===this._remaining&&k(i,this._result)},O.prototype._willSettleAt=function(t,e){var n=this;R(t,void 0,function(t){return n._settledAt(C,e,t)},function(t){return n._settledAt(T,e,t)})},O);function O(t,e){this._instanceConstructor=t,this.promise=new t(S),this.promise[M]||L(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&k(this.promise,this._result))):x(this.promise,new Error("Array Methods must be provided an Array"))}var V=(q.prototype.catch=function(t){return this.then(null,t)},q.prototype.finally=function(e){var n=this.constructor;return c(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},q);function q(t){this[M]=B++,this._result=this._state=void 0,this._subscribers=[],S!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(e,t){try{t(function(t){A(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return V.prototype.then=w,V.all=function(t){return new z(this,t).promise},V.race=function(o){var r=this;return n(o)?new r(function(t,e){for(var n=o.length,i=0;i<n;i++)r.resolve(o[i]).then(t,e)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},V.resolve=b,V.reject=function(t){var e=new this(S);return x(e,t),e},V._setScheduler=function(t){o=t},V._setAsap=function(t){s=t},V._asap=s,V.polyfill=function(){var t=void 0;if(void 0!==N)t=N;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=V},V.Promise=V},"object"==typeof i&&void 0!==n?n.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}.call(this)}.call(this,H("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(t,e,n){var i,o,e=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var c,l=[],d=!1,u=-1;function p(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&g())}function g(){if(!d){var t=a(p);d=!0;for(var e=l.length;e;){for(c=l,l=[];++u<e;)c&&c[u].run();u=-1,e=l.length}c=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||d||a(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("es6-promise"),n=t("./modules/customPolyfill"),o=t("./common/Timers"),r=t("./common/EventManager"),s=t("./common/Parameters"),a=t("./common/Logging"),c=t("./modules/BrowserStateTracker"),l=t("./modules/DynamicPlacements/Loader"),d=t("./modules/PlacementManager"),u=t("./modules/MawManager"),p=t("./modules/DynamicPlacements/Verification"),g=t("./modules/realtime-messaging/RealtimeMessaging"),h=t("./modules/RotationRulesAnalyticsManager"),m=t("./modules/SinglePageApplicationManager"),f=t("./modules/aps/aps"),v=t("./modules/PassbackManager"),y=t("./modules/Demo"),w=t("./common/Utilities");function b(){s.initialize()&&(o.start(),r.start(),u.MawManager.start(),p.Verification.start(),g.RealtimeMessaging.start(),c.start(),l.start(),d.start(),h.RotationRulesAnalyticsManager.start(r),s.config.integrations.dfp&&t("./modules/dfp/dfp-module").start(),s.config.integrations.sas&&w.BrowserUtils.attachScriptToElement(s.getBaseUrl(!0)+"/iat-sas.js",document.head),!1!==s.config.spa&&new m.SinglePageApplicationManager(r).start(),new f.AmazonPublisherServicesIntegration,new v.PassbackManager(d,a).start(),function t(e){void 0===e&&(e=0);if(window.frames["TG-listener"])return void w.BrowserUtils.attachScriptToElement(s.getBaseUrl(!0)+"/iat-extension.js",document.head);e<10&&o.timeout(function(){return t(++e)},1e3)}(),(new y.DemoModule).run(),r.postStart())}(0,i.polyfill)(),n.CustomPolyfill.init(),document.all&&!document.addEventListener||window!==window.top||b()},{"./common/EventManager":4,"./common/Logging":5,"./common/Parameters":6,"./common/Timers":7,"./common/Utilities":8,"./modules/BrowserStateTracker":12,"./modules/Demo":13,"./modules/DynamicPlacements/Loader":15,"./modules/DynamicPlacements/Verification":19,"./modules/MawManager":21,"./modules/PassbackManager":22,"./modules/PlacementManager":23,"./modules/RotationRulesAnalyticsManager":24,"./modules/SinglePageApplicationManager":25,"./modules/aps/aps":26,"./modules/customPolyfill":29,"./modules/dfp/dfp-module":31,"./modules/realtime-messaging/RealtimeMessaging":36,"es6-promise":1}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EventManagerAPI=n.postStart=n.start=n.emit=n.unlisten=n.listen=void 0;var o=t("./Timers"),i=t("./Parameters"),r=t("./../interfaces/Enums"),s=t("../modules/API"),a={},c={};function l(e){a[e]=function(t){h(e,t)}}function d(e){var n;a[e]=function(t){o.clear(n),n=o.timeout(function(){h(e,t)},100)}}function u(){window.addEventListener("keydown",a[6]),document.body.addEventListener("mousemove",a[0]),i.config.device!==r.DeviceType.Desktop&&(window.addEventListener("pageshow",a.pageshow),window.addEventListener("pagehide",a.pagehide)),document.hasFocus&&(document.hasFocus()?a[4](null):a[3](null)),function(){for(var t=window.frames,e=0;e<t.length;e++)try{var n=t[e].frameElement;n.contentWindow&&(n.contentWindow.addEventListener("scroll",a[1],!0),n.contentWindow.addEventListener("touchmove",a[1]),n.contentWindow.addEventListener("resize",a[2]),n.contentWindow.addEventListener("blur",a[3]),n.contentWindow.addEventListener("focus",a[4]),n.contentWindow.addEventListener("keypress",a[5]),n.contentWindow.addEventListener("click",a[7]),n.contentWindow.addEventListener("mousemove",a[0]),n.contentWindow.addEventListener("touchstart",a[9]))}catch(t){}}()}function p(t,e){c[t]?c[t].push(e):c[t]=[e]}function g(t,e){!c[t]||-1<(e=c[t].indexOf(e))&&c[t].splice(e,1)}function h(t,e){if(c[t])for(var n=c[t].length;-1<--n;)c[t][n](e)}n.listen=p,n.unlisten=g,n.emit=h,n.start=function(){var e,n,i;s.extend(s.ApiModule.EventManager,new m),l(3),l(4),l(7),d(1),d(2),d(5),l(6),l(9),a[0]=(i=!1,function(t){e===t.screenX||n===t.screenY||i||(e=t.screenX,n=t.screenY,i=!0,h(0,t),o.timeout(function(){i=!1},1e3))}),window.addEventListener("scroll",a[1],!0),window.addEventListener("touchmove",a[1]),window.addEventListener("resize",a[2]),window.addEventListener("blur",a[3]),window.addEventListener("focus",a[4]),window.addEventListener("keypress",a[5]),window.addEventListener("click",a[7])},n.postStart=function(){var e=!1,n=!1;p(8,u),"complete"===document.readyState?h(8,null):o.timeout(function(){n||(e=!0,h(8,null))},1e3),window.addEventListener("load",function(t){e?e=!1:(n=!0,h(8,t))})};var m=(f.prototype.listen=function(t,e){p(t,e)},f.prototype.unlisten=function(t,e){g(t,e)},f.prototype.emit=function(t,e){h(t,e)},f);function f(){}n.EventManagerAPI=m},{"../modules/API":11,"./../interfaces/Enums":10,"./Parameters":6,"./Timers":7}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.error=n.warn=n.info=void 0;var r=t("./Parameters"),s=t("./../interfaces/Enums");function i(t,e,n){if(((r.config.log||{}).level||s.LogLevel.None)>n)return!1;var i,o="["+(i=new Date).getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"] ["+e+"]"+t;if(!o.match((r.config.log||{}).filter||""))return!1;switch(n){case s.LogLevel.Info:return console.info(o),!0;case s.LogLevel.Warning:return console.warn(o),!0;case s.LogLevel.Error:return console.error(o),!0}return!1}n.info=function(t,e){return i(t,e,s.LogLevel.Info)},n.warn=function(t,e){return i(t,e,s.LogLevel.Warning)},n.error=function(t,e){return i(t,e,s.LogLevel.Error)}},{"./../interfaces/Enums":10,"./Parameters":6}],6:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getBaseUrl=o.updateConfiguration=o.initialize=o.config=void 0;var n=t("../interfaces/Enums");o.initialize=function(){return o.config=window.__tgconf,o.config.device="Smartphone"===o.config.d_type?n.DeviceType.Mobile:"Tablet"===o.config.d_type?n.DeviceType.Tablet:n.DeviceType.Desktop,o.config.version=function(){if(!document.currentScript)return"";var t=document.currentScript.getAttribute("src");if(!t)return"";try{var e=t.split("/");return e[e.length-1].replace("iat-","").replace(".js","")}catch(t){return""}}(),!0},o.updateConfiguration=function(t){o.config.sessionId=t.sessionId,o.config.section=t.section,o.config.znl=t.znl,o.config.dads=t.dads},o.getBaseUrl=function(t){var e=o.config.rootPath,n=0<e.indexOf("-dev"),i=n?"-dev":"";return(e=n&&!t?e.replace("https://","http://"):e).replace("services"+i,t?"cdn"+i:"www")}},{"../interfaces/Enums":10}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.start=n.clear=n.interval=n.timeout=void 0;var i=t("./Utilities"),o={};function r(){var n=+new Date;(0,i.foreach)(o,function(t){var e=o[t];if(e)switch(e.type){case 0:e.timeElapsed+=n-e.lastTick,e.lastTick=n,e.timeElapsed>e.delay&&(e.callback(),delete o[t]);break;case 1:e.timeElapsed+=n-e.lastTick,e.lastTick=n,e.timeElapsed>e.delay&&(e.callback(),e.timeElapsed-=e.delay)}})}function s(t,e,n){var i=Math.floor(1e8*Math.random());return o[i]={callback:t,delay:e,timeElapsed:0,lastTick:+new Date,type:n},i}n.timeout=function(t,e){return s(t,e,0)},n.interval=function(t,e){return s(t,e,1)},n.clear=function(t){o[t]&&delete o[t]},n.start=function(){window.setInterval(r,100)}},{"./Utilities":8}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoUtils=n.StringUtils=n.BrowserUtils=n.Cookies=n.tryParseInt=n.generateBeacon=n.removeClass=n.addClass=n.setCssProperty=n.getElementSize=n.extendCustomTargeting=n.getDocumentHeight=n.getViewport=n.foreach=void 0;var i=t("../interfaces/Configuration");function o(t){if(!t)return 0;t=t.replace(/px/,"");return""===t||"auto"===t?0:parseInt(t)}n.foreach=function(t,e){Object.keys(t).forEach(e)},n.getViewport=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,top:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}},n.getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},n.extendCustomTargeting=function(t,e){for(var n in e)t[n]?t[n]=function(t,e){for(var n=e.length-1;-1<n;n--)-1<t.indexOf(e[n])||t.push(e[n]);return t}(t[n],e[n]):t[n]=e[n];return t};var r=new RegExp("rect\\(((?:[0-9]*px\\s?)*)\\)");function s(t,e,n){var i="; max-age="+n,o="",n=document.location.host.split(".");3<n.length&&(o="; domain=."+(o=n.slice(1).join("."))),document.cookie=t+"="+e+i+o+"; path=/; samesite=lax"}n.getElementSize=function(t){if(t.style&&t.style.clip){var e=t.style.clip.replace(/,/g,"").match(r);if(e)return e=e[1].split(" "),new i.Size(o(e[1])-o(e[3]),o(e[2])-o(e[0]))}return new i.Size(t.offsetWidth||o(t.style.width)||0,t.offsetHeight||o(t.style.height)||0)},n.setCssProperty=function(t,e,n,i){t.style.setProperty(e,n,i)},n.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},n.removeClass=function(t,e){e=new RegExp("(\\s|^)"+e+"(\\s|$)","g"),t.className=t.className.replace(e," ").trim()},n.generateBeacon=function(t){t=t.replace(/\[RANDOM\]/g,Math.floor(1e8*Math.random()).toString());var e=document.createElement("img");e.onload=function(){document.body.removeChild(e)},e.setAttribute("style","width:0;height:0;display:none;"),e.setAttribute("src",t),document.body.appendChild(e)},n.tryParseInt=function(t){try{return parseInt(t)}catch(t){return 0}},(t=n.Cookies||(n.Cookies={})).IdleCookieName="___iat_idl",t.AdhesionDismissedCookieName="___iat_adhd",t.RealtimeMultiplierCookieName="___iat_rtmt",t.createCookie=function(t,e,n){window.__tgconf.cookies&&s(t,e,n)},t.eraseCookie=function(t){s(t,"",-1)},t.readCookie=function(t){t+="=";for(var e=document.cookie.split(";"),n=e.length;-1<--n;){var i=e[n].trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""};a.getTopMostPageUrl=function(){return window.top.location.href},a.getTopMostHostname=function(){return window.top.location.hostname},a.getTopMostPath=function(){var t=window.top.location,e=t.href;return e=(e=e.replace(t.protocol+"//","")).substr(t.host.length)},a.getScriptElement=function(t,e,n){var i=document.createElement("script");return i.type="text/javascript",i.async=!0,i.src=t,e&&i.setAttribute("width",e.toString()),n&&i.setAttribute("height",n.toString()),i},a.attachScriptToElement=function(t,e,n){n=a.getScriptElement(t+((n=void 0===n?!0:n)?"?ts="+ +new Date:""));e.appendChild(n)},a.buildRequestByUrl=function(t,n,i){var o=document.createElement("iframe");o.setAttribute("style","border-width:0px"),o.style.display="none",o.style.margin="0 auto",o.src="about:blank",t.appendChild(o);var r=window.setInterval(function(){var t=o.contentDocument||(o.contentWindow?o.contentWindow.document:null);if(t&&"complete"===t.readyState)try{var e=a.getScriptElement(n);i&&(e.onload=function(){i(o.contentWindow)}),t.body.appendChild(e)}catch(t){}finally{window.clearInterval(r)}},10)},t=a;function a(){}n.BrowserUtils=t;c.padRight=function(t,e,n){void 0===n&&(n=" ");for(var i=[],o=0;o<e;o++){var r=t.charAt(o);""===r?i.push(n):i.push(r)}return i.join("")},t=c;function c(){}n.StringUtils=t;l.generateUniqueId=function(){return this.generate(8)},l.generateIatFrameId=function(){return this.generate(4)},l.generate=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},t=l;function l(){}n.CryptoUtils=t},{"../interfaces/Configuration":9}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Size=n.AdUnitDomReference=void 0,n.AdUnitDomReference=function(){},n.Size=function(t,e){var n=this;this.isTooSmall=function(){return n.width<10||n.height<10},this.toString=function(){return n.width+"x"+n.height},this.width=t,this.height=e}},{}],10:[function(t,e,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.TCFVendors=n.SideBannerPosition=n.AdUnitType=n.UnitViewState=n.BrowserState=n.EventType=n.TimerType=n.LogLevel=n.DeviceType=n.EntryState=void 0,(i=n.EntryState||(n.EntryState={}))[i.Request=0]="Request",i[i.Response=1]="Response",i[i.Blank=2]="Blank",(i=n.DeviceType||(n.DeviceType={}))[i.Desktop=0]="Desktop",i[i.Tablet=1]="Tablet",i[i.Mobile=2]="Mobile",(i=n.LogLevel||(n.LogLevel={}))[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i[i.None=4]="None",(i=n.TimerType||(n.TimerType={}))[i.Timeout=0]="Timeout",i[i.Interval=1]="Interval",(i=n.EventType||(n.EventType={}))[i.MouseMove=0]="MouseMove",i[i.Scroll=1]="Scroll",i[i.Resize=2]="Resize",i[i.Blur=3]="Blur",i[i.Focus=4]="Focus",i[i.KeyPress=5]="KeyPress",i[i.KeyDown=6]="KeyDown",i[i.Click=7]="Click",i[i.PageLoad=8]="PageLoad",i[i.TouchStart=9]="TouchStart",i[i.MessageSent=10]="MessageSent",i[i.MessageReceived=11]="MessageReceived",i[i.MessagingConnected=12]="MessagingConnected",i[i.MessagingDisconnected=13]="MessagingDisconnected",i[i.TGI=14]="TGI",i[i.RealtimeDelivery=15]="RealtimeDelivery",i[i.DemoRedSquare=16]="DemoRedSquare",i[i.DemoReplaceAllAds=17]="DemoReplaceAllAds",i[i.StateChanged=18]="StateChanged",i[i.AdUnitCreated=19]="AdUnitCreated",i[i.AdUnitRemoved=20]="AdUnitRemoved",i[i.AdUnitViewState=21]="AdUnitViewState",i[i.BannerChanged=22]="BannerChanged",i[i.Passback=23]="Passback",i[i.PublisherBlank=24]="PublisherBlank",(i=n.BrowserState||(n.BrowserState={}))[i.Unknown=-1]="Unknown",i[i.Inactive=0]="Inactive",i[i.Active=1]="Active",i[i.Idle=2]="Idle",(i=n.UnitViewState||(n.UnitViewState={}))[i.NotVisible=0]="NotVisible",i[i.Visible=1]="Visible",(i=n.AdUnitType||(n.AdUnitType={}))[i.normal=0]="normal",i[i.sticky=1]="sticky",i[i.bottom=2]="bottom",i[i.side=3]="side",i[i.verification=4]="verification",i[i.toproll=5]="toproll",i[i.megafone=6]="megafone",(i=n.SideBannerPosition||(n.SideBannerPosition={}))[i.None=0]="None",i[i.Top=1]="Top",i[i.Fixed=2]="Fixed",i[i.Bottom=3]="Bottom",(n=n.TCFVendors||(n.TCFVendors={}))[n.Google=755]="Google",n[n.Amazon=793]="Amazon"},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ApiModule=n.get=n.extend=void 0,n.extend=function(t,e){window.__iat_api||window.__iat_api||(window.__iat_api={}),window.__iat_api[t.toString()]=e},n.get=function(t){return window.__iat_api[t.toString()]},(n=n.ApiModule||(n.ApiModule={})).RealtimeProvider="r",n.BrowserStateTracker="b",n.PlacementManager="p",n.EventManager="e",n.APS="APS",n.DFP="DFP",n.SAS="SAS"},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BrowserStateTrackerAPI=n.start=n.minimumDurationForReengagementReached=n.getCurrentState=void 0;var i,o,r,s,a,c=t("./../common/Parameters"),l=t("./../common/Logging"),d=t("./../common/Utilities"),u=t("./../common/Timers"),p=t("./../common/EventManager"),g=t("./../interfaces/Enums"),h=t("./realtime-messaging/RealtimeMessaging"),m=t("../modules/API"),f=g.BrowserState.Unknown,v=!0,y=0,w=0;function b(){return f}function M(){u.clear(i),i=u.timeout(function(){E(g.BrowserState.Idle)},o)}function S(){r=u.timeout(function(){h.RealtimeMessaging.disconnect()},s)}function I(t){v&&"mousemove"===t.type?v=!1:f!==g.BrowserState.Inactive&&(M(),E(g.BrowserState.Active))}function C(){f===g.BrowserState.Inactive&&E(g.BrowserState.Active)}function T(){document.hasFocus()||E(g.BrowserState.Inactive)}function E(t){if(f!==t){switch(t){case g.BrowserState.Active:h.RealtimeMessaging.isForcedDisconnected&&h.RealtimeMessaging.connect(),u.clear(r),d.Cookies.eraseCookie(d.Cookies.IdleCookieName),M(),0<y&&(w=+new Date-y,y=0);break;case g.BrowserState.Inactive:S(),u.clear(i),d.Cookies.eraseCookie(d.Cookies.IdleCookieName),y=+new Date,w=0;break;case g.BrowserState.Idle:S(),d.Cookies.createCookie(d.Cookies.IdleCookieName,"1",86400),y=+new Date,w=0}f=t,l.info("State changed to "+t,"StateManager"),p.emit(18,t)}}n.getCurrentState=b,n.minimumDurationForReengagementReached=function(){return a<w},n.start=function(){var t;m.extend(m.ApiModule.BrowserStateTracker,new P),t=c.config.smc||{},o=1e3*(t.idleTimer||19),s=1e3*(t.disconnectTimer||120),a=c.config.mid?1e3*c.config.mid:o,p.listen(4,C),p.listen(3,T),p.listen(1,I),p.listen(0,I),p.listen(5,I),p.listen(6,I),p.listen(7,I),p.listen(9,I),document.hasFocus()?E(d.Cookies.readCookie(d.Cookies.IdleCookieName)?g.BrowserState.Idle:g.BrowserState.Active):E(g.BrowserState.Inactive)};var P=(A.prototype.getCurrentState=function(){return f},A);function A(){}n.BrowserStateTrackerAPI=P},{"../modules/API":11,"./../common/EventManager":4,"./../common/Logging":5,"./../common/Parameters":6,"./../common/Timers":7,"./../common/Utilities":8,"./../interfaces/Enums":10,"./realtime-messaging/RealtimeMessaging":36}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DemoModule=void 0;var i=t("./../common/EventManager"),o=t("./PlacementManager"),t=(r.prototype.run=function(){i.listen(16,this.onDemoRedSquareMessage),i.listen(17,this.onDemoReplaceAllAdsMessage)},r.prototype.onDemoRedSquareMessage=function(t){var e=document.createElement("DIV");e.setAttribute("style",t.script),document.body.appendChild(e),setTimeout(function(){e.parentElement&&e.parentElement.removeChild(e)},1e3*t.duration)},r.prototype.onDemoReplaceAllAdsMessage=function(s){o.getAdUnits().forEach(function(e){if(e.getCurrentEntry()){var t=e.element.getBoundingClientRect(),n=document.createElement("DIV");n.style.width=t.width+"px",n.style.height=t.height+"px",n.innerHTML=s.script;for(var i=[],o=0;o<e.element.children.length;o++){var r=e.element.children[o];"SCRIPT"===r.nodeName||-1<r.className.indexOf("tg-hidden")||(r.style.display="none",i.push(r))}e.element.appendChild(n),setTimeout(function(){e.element.removeChild(n);for(var t=0;t<i.length;t++)i[t].style.display="inline-block"},1e3*s.duration)}})},r);function r(){}n.DemoModule=t},{"./../common/EventManager":4,"./PlacementManager":23}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=void 0;var Utilities=require("../../common/Utilities"),Timers=require("../../common/Timers"),EventManager=require("../../common/EventManager"),Parameters=require("../../common/Parameters"),PlacementManager=require("../PlacementManager"),utils_1=require("../dfp/utils"),confs={},adhesionContainer,adContainer,bottomMarginElement,overlayProcessorHandler=0;function getDismissedState(){var t=Utilities.Cookies.readCookie(Utilities.Cookies.AdhesionDismissedCookieName);return t?JSON.parse(t):{}}function userHasClosed(t){return 1===getDismissedState()[t]}function closedByUser(t){var e;!t||!t.dismissedDuration||t.dismissedDuration<=0||((e=getDismissedState())[t.adUnitId]=1,Utilities.Cookies.createCookie(Utilities.Cookies.AdhesionDismissedCookieName,JSON.stringify(e),t.dismissedDuration))}function render(t){var e,n,i,o="";t.isTracking?(o='<div id="tg-adhesion-bar-'+t.adUnitId+'" class="tg-adhesion-bar" style="position:fixed; bottom:0; left:0; right:0; width:100%; z-index: 2147483636;"><div class="tg-adhesion-banner id-'+t.adUnitId+'" style="margin: 0px auto; clear: both; width: '+t.size.width+"px; height: "+t.size.height+'px; "></div></div>',t.element.style.pointerEvents="none"):(e=Math.min(t.size.height,100),i=n="",i=!t.omitBackground?(n="border-top: 1px solid #7d7d7d; background: #fff; max-width: inherit; width: 100%; height: "+(e+10)+"px; z-index: 2147483636; padding-top: 5px; position: fixed; margin: 0; bottom: "+t.bottomMargin+"px; left: 0; right: 0; box-sizing: border-box","background-color: #fff; border: 1px solid #7d7d7d; border-bottom: 2px solid #fff; border-radius: 4px 4px 0 0; height: 24px; position: absolute; top: -23px; right: 0; display: block; padding: 2px 0 0 2px;"):(n="border-top: 1px solid #cacaca; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; background: #fff; max-width: inherit; height: "+(e+10)+"px; z-index: 2147483636; padding: 5px 5px 0px 5px; position: fixed; margin: 0; bottom: "+t.bottomMargin+"px; left: 50%; transform: translate(-50%, 0); box-sizing: border-box","background-color: #cacaca;border-radius: 20px;border: 2px #ffffff solid;height: 24px;position: absolute;top: -14px;right: -14px;display: block; padding: 0px 0 0 0px;z-index: 3147483636;"),o='<div id="tg-adhesion" style="'+n+'">   <div id="tg-adhesion-close-button">       <button style="'+i+'">           <span style="'+"position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); clip-path: polygon(0 0, 0 0, 0 0, 0 0);"+'">Close</span>           <svg style="width: 20px; " viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M19, 6.41L17.59, 5L12, 10.59L6.41, 5L5, 6.41L10.59, 12L5, 17.59L6.41, 19L12, 13.41L17.59, 19L19, 17.59L13.41, 12L19, 6.41Z"></path></svg>       </button>   </div>   <div id="tg-adhesion-banner-id-'+t.adUnitId+'" class="tg-adhesion-banner id-'+t.adUnitId+'" style="margin:0 auto; text-align: center"></div></div>',t.element.style.display="none"),t.element.innerHTML=o,document.body.appendChild(t.element),t.id=PlacementManager.createAdUnit({id:parseInt(t.adUnitId),element:t.element.querySelector(".tg-adhesion-banner.id-"+t.adUnitId),scriptWindow:window,window:window}),confs[t.adUnitId]=t}function toogleVisibility(t,e){var n=PlacementManager.getAdUnit(t.id);n&&((e=e&&(!t.loaded||isOverlayDisplayed(t)||!isValidInViewport(t))?!1:e)&&updateBottomMargin(),t.element.style.display=e?"block":"none",n.updateViewState(Utilities.getViewport()))}function onGetServedAdHeight(t,e){if(void 0===e&&(e=0),!adContainer||20===e)return t(0);var n=Utilities.getElementSize(adContainer).height;0!==n?t(n):Timers.timeout(function(){return onGetServedAdHeight(t,++e)},0)}function updateVerticalAlignment(t){var e;adContainer&&(e=0,50<Math.min(t.size.height,100)&&onGetServedAdHeight(function(t){0<t&&t<100&&(e=Math.round((100-t)/2))}),adContainer.style.marginTop=e+"px")}function updateBottomMargin(){adhesionContainer&&bottomMarginElement&&(adhesionContainer.style.bottom=getBottomMargin()+"px")}function getDeclaredBottom(t){for(var e=0;e<document.styleSheets.length;e++)try{for(var n=document.styleSheets,i=n[e].rules||n[e].cssRules,o=0;o<i.length;o++){var r=i[o];if(r.selectorText=="."+t)return r.style.bottom}}catch(t){}}function getBottomMargin(){if(!bottomMarginElement)return 0;var t=window.getComputedStyle(bottomMarginElement);if(t.opacity&&parseFloat(t.opacity)<.5)return 0;var e=bottomMarginElement.getBoundingClientRect(),n=t.webkitTransform,i=new WebKitCSSMatrix(n).m42,n=e.top+i;if(n>window.innerHeight)return 0;if(bottomMarginElement.style.bottom&&0<Math.abs(parseInt(bottomMarginElement.style.bottom))&&Math.abs(parseInt(bottomMarginElement.style.bottom))<=e.height)return 0;if(0<i||bottomMarginElement.style.bottom&&parseInt(bottomMarginElement.style.bottom)<=0||parseInt(getDeclaredBottom(bottomMarginElement.className))<=0||"fixed"===t.getPropertyValue("position")&&parseInt(t.getPropertyValue("bottom"))<=0)return e.height;n=window.innerHeight-n;return n>window.innerHeight||n>e.height?0:n}function bottomMarginProcessor(e){var n;window.MutationObserver&&e.bottomMarginSelector&&(bottomMarginElement=document.querySelector(e.bottomMarginSelector))&&(e.bottomMargin=getBottomMargin(),(n=new MutationObserver(function(t){t.forEach(function(){var t;e.loaded&&!adhesionContainer||!bottomMarginElement?n.disconnect():(t=parseFloat(window.getComputedStyle(bottomMarginElement).webkitTransitionDuration),0<(t=isNaN(t)?0:t)?Timers.timeout(function(){return updateBottomMargin()},Math.min(1e3*t,150)):updateBottomMargin())})})).observe(document.body,{attributes:!0}),n.observe(bottomMarginElement,{attributes:!0,subtree:!0}))}function isValidInViewport(t){var e=Utilities.getViewport(),n=!0;0<t.minimumScroll&&(!t.minimumScrollMaxViewportHeight||e.height<=t.minimumScrollMaxViewportHeight)&&(n=e.top>=t.minimumScroll);t=!(0<t.footerProtectionHeight)||e.top+e.height+t.footerProtectionHeight<=Utilities.getDocumentHeight();return n&&t}function viewportHandler(){Object.keys(confs).forEach(function(t){t=confs[t];t.isTracking||toogleVisibility(t,!0)})}function close(t,e,n){void 0===n&&(n=!1),delete confs[t.adUnitId],document.body.removeChild(t.element),EventManager.unlisten(22,bannerLoadedHandler),EventManager.unlisten(23,bannerLoadedHandler),EventManager.unlisten(2,viewportHandler),EventManager.unlisten(1,viewportHandler),"user closed"===e&&closedByUser(t);var i,o=PlacementManager.getAdUnit(t.id);t.closeCallback&&window[t.closeCallback]&&"function"==typeof window[t.closeCallback]&&(i=o?o.getCurrentEntry():null,window[t.closeCallback]({closeAction:e,slot:i?i.index:0})),o&&!n&&o.delete(),t.isTracking||!adContainer||(o=adContainer.getAttribute("tg-zone"))&&o===t.id&&(bottomMarginElement=adContainer=adhesionContainer=void 0,Timers.clear(overlayProcessorHandler))}function wireUpCloseEvent(e){Timers.timeout(function(){var t=e.element.querySelector("#tg-adhesion-close-button");t&&t.addEventListener("click",function(){close(e,"user closed")})},100)}function bannerLoadedHandler(e){var t,n=confs[e.adUnitId];n&&((t=e.getCurrentEntry())&&!t.isEmpty()?n.loaded?updateVerticalAlignment(n):(Utilities.foreach(confs,function(t){t!==e.adUnitId&&!confs[t].isTracking&&confs[t].loaded&&close(n,"only one ad unit allowed")}),e.isTrackingUnit||0!==e.currentEntryIndex||e.logPotentialImpression(),adhesionContainer=document.querySelector("#tg-adhesion"),adContainer=adhesionContainer.querySelector(".tg-adhesion-banner.id-"+n.adUnitId),n.loaded=!0,wireUpCloseEvent(n),onGetServedAdHeight(function(t){toogleVisibility(n,!0),updateVerticalAlignment(n)})):close(n,"no inventory"))}function deleteHandler(t){t=confs[t.adUnitId];t&&close(t,"deleted",!0)}function isOverlayDisplayed(t){if(t.overlaySelector){var e=document.querySelectorAll(t.overlaySelector);if(e&&e.length)for(var n=0;n<e.length;n++){var i=window.getComputedStyle(e[n]);if("none"!==i.display&&"hidden"!==i.visibility)return 1}}}function overlayProcessor(t){t.overlaySelector&&(overlayProcessorHandler=Timers.interval(function(){toogleVisibility(t,!0)},200))}function evaluateLoadConditions(model){if(!model)return 1;if(model.selector){var isMatch=null!==document.querySelector(model.selector),cssSelectorResult=model.selectorMatch&&isMatch||!model.selectorMatch&&!isMatch;if(!cssSelectorResult)return}if(model.slotPath){var getValue_1=function(value){var mustEval=!model.slotPath.startsWith("/");try{return mustEval?eval(value):value}catch(error){return value}},slotPath_1=utils_1.DfpUtils.getFinalSlotPath(getValue_1(model.slotPath));if(slotPath_1){var networkCode_1=Parameters.config.integrations.dfp.networkCode,slots=utils_1.DfpUtils.isGptAvailable(window)?window.googletag.pubads().getSlots().filter(function(t){return utils_1.DfpUtils.getIntegratedAdUnitPath(t.getAdUnitPath(),networkCode_1)===slotPath_1}):[],slots=slots.filter(function(t){return!model.slotElementId||t.getSlotElementId()===getValue_1(model.slotElementId)});if(0<slots.length&&null!==slots[0].getResponseInformation())return}}return 1}function create(t,e){var n;Parameters.config.dads||confs[t]||!e.conf.sizes||!e.conf.sizes[0]||userHasClosed(t)||(n={id:"will hold the full ad unit id, after creation",adUnitId:t,element:document.createElement("div"),size:e.conf.sizes.find(function(t){return t.height===Math.max.apply(Math,e.conf.sizes.map(function(t){return t.height}))}),footerProtectionHeight:e.conf.bottomHeight||0,closeCallback:e.conf.closeCallback,isTracking:e.tu,loaded:!1,overlaySelector:e.conf.overlaySelector,bottomMargin:0,bottomMarginSelector:e.conf.bottomMarginSelector,dismissedDuration:e.conf.dismissedDuration,minimumScroll:e.conf.minimumScroll||0,minimumScrollMaxViewportHeight:e.conf.minimumScrollMaxViewportHeight||0,omitBackground:e.conf.omitBackground||!1},Timers.timeout(function(){evaluateLoadConditions(e.conf.loadConditions)&&(n.bottomMarginSelector&&bottomMarginProcessor(n),render(n),n.overlaySelector&&overlayProcessor(n),e.tu||(EventManager.listen(2,viewportHandler),EventManager.listen(1,viewportHandler),EventManager.listen(22,bannerLoadedHandler),EventManager.listen(23,bannerLoadedHandler),EventManager.listen(20,deleteHandler)))},1e3*(e.conf.showDelay||0)))}exports.create=create},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Timers":7,"../../common/Utilities":8,"../PlacementManager":23,"../dfp/utils":33}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.start=void 0;var i=t("../../interfaces/Enums"),o=t("../../common/EventManager"),r=t("../../common/Parameters"),s=t("../../common/Utilities"),a=t("../PlacementManager"),c=t("./Sticky"),l=t("./Adhesion"),d=t("./SideBanner"),u=t("./Verification"),p=t("./megafone"),g=t("../tcf/tcf"),h=t("./TopRoll");function m(){var n=r.config.znl;(0,s.foreach)(n,function(t){var e=n[t];if(!e.dc||-1!==e.dc.toLowerCase().indexOf(i.DeviceType[r.config.device].toLowerCase()))switch(i.AdUnitType[e.type||"normal"]){case i.AdUnitType.normal:case i.AdUnitType.sticky:e.conf.containerElementSelector&&function(t,e){for(var n=document.querySelectorAll(e.conf.containerElementSelector),i=n.length;-1<--i;){var o,r=n[i];!e.tu&&"inside"===e.conf.elementSelectorPosition||(1===e.conf.sizes[0].width&&1===e.conf.sizes[0].height&&(o=(0,s.getElementSize)(r),e.conf.sizes[0].width=o.width,e.conf.sizes[0].height=o.height),o=document.createElement("div"),"inside"===e.conf.elementSelectorPosition?r.insertBefore(o,r.firstChild):r.parentNode.insertBefore(o,"before"===e.conf.elementSelectorPosition?r:r.nextSibling),(r=o).style.width=e.conf.sizes[0].width+"px",o.style.height=e.conf.sizes[0].height+"px",o.style.clear="both",e.tu&&(o.style.position="absolute",o.style.pointerEvents="none")),a.createAdUnit({id:t,element:r,scriptWindow:window,window:window})}}(parseInt(t),e);break;case i.AdUnitType.bottom:(e.tu||g.TcfIntegration.isAllowed(i.TCFVendors.Google))&&l.create(t,e);break;case i.AdUnitType.side:e.conf&&e.conf.sizes&&e.conf.sizes.length&&d.create(t,e);break;case i.AdUnitType.verification:g.TcfIntegration.isAllowed(i.TCFVendors.Google)&&u.Verification.create(t,e);break;case i.AdUnitType.toproll:h.TopRoll.create(t,e);break;case i.AdUnitType.megafone:p.Megafone.create(t,e)}})}n.start=function(){c.start(),o.listen(8,m)}},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Utilities":8,"../../interfaces/Enums":10,"../PlacementManager":23,"../tcf/tcf":37,"./Adhesion":14,"./SideBanner":16,"./Sticky":17,"./TopRoll":18,"./Verification":19,"./megafone":20}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=void 0;var i=t("../../interfaces/Enums"),o=t("../../common/Utilities"),r=t("../PlacementManager"),s=t("../../common/EventManager"),a=(c.prototype.showAdZone=function(){var t;this.element?(this.element.style.display="block",(t=r.getAdUnit(this.id+".00"))&&t.updateViewState(o.getViewport())):(this.element=document.createElement("div"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.isTracking?this.element.style.pointerEvents="none":this.element.style.zIndex=this.zIndex,this.element.setAttribute("class","tg-wss tg-wss-"+this.position),document.body.appendChild(this.element),"absolute"===this.isSticky?(this.element.style.position="absolute",this.element.style.top=this.top+"px"):(window.addEventListener("scroll",this.checkPosition.bind(this)),this.checkPosition()),r.createAdUnit({id:parseInt(this.id),element:this.element,scriptWindow:window,window:window}))},c.prototype.hideAdZone=function(){var t=r.getAdUnit(this.id+".00");t&&this.element&&(this.element.style.display="none",t.updateViewState(o.getViewport()))},c.prototype.checkPosition=function(){var t;this.element&&(t=o.getViewport(),this.footerDist&&t.top+this.height>o.getDocumentHeight()-this.footerDist?this.currPos!==i.SideBannerPosition.Bottom&&(this.element.style.position="absolute",this.element.style.top="",this.element.style.bottom=this.footerDist+"px",this.element.offsetParent.style.position||(this.element.offsetParent.style.position="relative"),this.currPos=i.SideBannerPosition.Bottom):t.top+this.fixDist<this.top&&this.currPos!==i.SideBannerPosition.Top?(this.element.style.position="absolute",this.element.style.top=this.top+"px",this.element.style.bottom="",this.currPos=i.SideBannerPosition.Top):t.top+this.fixDist>=this.top&&this.currPos!==i.SideBannerPosition.Fixed&&(this.element.style.position="fixed",this.element.style.top=this.fixDist+"px",this.element.style.bottom="",this.currPos=i.SideBannerPosition.Fixed))},c.prototype.findPosition=function(){for(var t=this.dockElem.offsetLeft,e=this.dockElem;e.offsetParent&&"BODY"!==e.offsetParent.nodeName.toUpperCase();)t+=(e=e.offsetParent).offsetLeft;return"left"===this.position?t-this.width-10+this.offset:t+10+o.getElementSize(this.dockElem).width+this.offset},c.prototype.reposition=function(){var t;this.element&&(t=this.findPosition(),this.element.style.left=t+"px")},c.prototype.fits=function(){return this.findPosition()>-1*this.width*(1-this.visibilityRatio)&&this.findPosition()<o.getViewport().width-this.width*this.visibilityRatio},c.prototype.onResize=function(){this.fits()?(this.showAdZone(),this.reposition()):this.hideAdZone()},c);function c(t,e){this.currPos=i.SideBannerPosition.None;var n=document.querySelector(e.conf.dockElementSelector);n&&(this.id=t,this.dockElem=n,this.position=e.conf.position||"right",this.width=e.conf.sizes[0].width,this.height=e.conf.sizes[0].height,this.visibilityRatio=(e.conf.visib||50)/100,this.offset=e.conf.horizontalOffset,this.zIndex=e.conf.zindex||"1",this.isSticky=e.conf.type||"dynamic",this.top=e.conf.initialTopOffset||0,this.footerDist=e.conf.footerDist||0,this.fixDist=e.conf.stickyTopOffset||0,this.isTracking=e.tu||!1,this.onResize(),s.listen(2,this.onResize.bind(this)))}n.create=function(t,e){var n=!0;if(e.conf.mustContainAdUnits&&0<e.conf.mustContainAdUnits.length)for(var n=!1,i=0;i<e.conf.mustContainAdUnits.length&&!(n=!!r.getAdUnit(t+".00"));i++);if(e.conf.cannotContainAdUnits&&0<e.conf.cannotContainAdUnits.length&&n)for(i=0;i<e.conf.cannotContainAdUnits.length&&(n=!r.getAdUnit(t+".00"));i++);n&&new a(t,e)}},{"../../common/EventManager":4,"../../common/Utilities":8,"../../interfaces/Enums":10,"../PlacementManager":23}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.start=void 0;var i=t("../../interfaces/Enums"),o=t("../../common/EventManager"),r=t("../../common/Parameters"),s=t("../../common/Utilities"),a={},c=[],l=!1;function d(t){var e={element:t.element,position:t.position,top:t.position.top,left:t.position.left,cssPosition:t.element.style.position,cssLeft:t.element.style.left?parseInt(t.element.style.left.substring(0,t.element.style.left.length-2)):0,cssWidth:t.element.style.width,cssTop:t.element.style.top,cssTextAlign:t.element.style.textAlign,cssMargin:t.element.style.margin,cssZIndex:t.element.style.zIndex,parent:t.element.parentNode,stickyOffsetTop:t.config.topOffset,bottomThreshold:t.config.bottomHeight,stickyZIndex:t.config.zindex,isSticky:!1,isAtBottom:!1,closed:!1,isTracking:t.isTrackingUnit};a[t.id]=e,u(),t.updateViewState(s.getViewport())}function u(){var e=s.getViewport(),n=s.getDocumentHeight();s.foreach(a,function(t){t=a[t];t.isSticky||t.isAtBottom||(t.top=t.position.absTop,t.left=t.position.left),t.closed||(t.isSticky&&e.top+t.stickyOffsetTop<=t.top&&(t.element.style.position=t.cssPosition,t.element.style.left=t.cssLeft+"px",t.element.style.top=t.cssTop,t.element.style.width=t.cssWidth,t.element.style.textAlign=t.cssTextAlign,t.element.style.margin=t.cssMargin,t.isTracking||(t.element.style.zIndex=t.cssZIndex),t.isSticky=!1,t.isAtBottom=!1),t.isSticky&&n-e.top-t.stickyOffsetTop-t.position.height<t.bottomThreshold?(t.element.style.position="fixed",t.element.style.top="",t.element.style.bottom=t.bottomThreshold+"px",t.isTracking||(t.element.style.zIndex=t.stickyZIndex||"2147483647"),t.isSticky=!1,t.isAtBottom=!0):!t.isSticky&&e.top+t.stickyOffsetTop>t.top&&n-e.top-t.stickyOffsetTop-t.position.height>=t.bottomThreshold&&(t.element.style.position="fixed",t.element.style.bottom="",t.element.style.left=t.left+"px",t.element.style.top=t.stickyOffsetTop+"px",t.element.style.margin="0px",t.isTracking||(t.element.style.zIndex=t.stickyZIndex||"2147483647"),t.isSticky=!0,t.isAtBottom=!1))})}function p(){s.foreach(a,function(t){for(var t=a[t],e=t.parent.offsetLeft+t.cssLeft,n=t.parent;"HTML"!==n.nodeName&&n.offsetParent;)e+=(n=n.offsetParent).offsetLeft;t.position.left=e,t.isSticky&&(t.element.style.left=e+"px")})}function g(t){r.config.device!==i.DeviceType.Mobile&&t.type===i.AdUnitType.sticky&&(l?d(t):c.push(t))}function h(t){l||-1<(t=c.indexOf(t))&&c.splice(t,1)}n.start=function(){o.listen(19,g),o.listen(20,h),o.listen(2,p),window.addEventListener("scroll",u),o.listen(8,function(){for(l=!0;0<c.length;)d(c.pop())})}},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Utilities":8,"../../interfaces/Enums":10}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TopRoll=void 0;var i=t("../../common/Timers"),o=t("../../common/EventManager"),r=t("../PlacementManager"),t=(s.prototype.init=function(){this.container=document.createElement("div"),this.container.setAttribute("id","iat-top-roll"),this.container.style.width="1px",this.container.style.height="1px",this.container.style.display="none",document.body.appendChild(this.container),this.id=r.createAdUnit({id:this.adUnitId,element:this.container,scriptWindow:window,window:window})},s.prototype.delete=function(){this.container.parentElement===document.body&&document.body.removeChild(this.container),o.unlisten(22,this.bannerChangedHandler);var t=r.getAdUnit(this.id);t&&t.delete()},s.prototype.bannerChangedHandler=function(t){var e;t.id===this.id&&((e=t.getCurrentEntry())&&!e.isEmpty()?t.disableRotation():this.delete())},s.create=function(t,e){var n=this;i.timeout(function(){n.instance=new s(parseInt(t)),o.listen(22,n.instance.bannerChangedHandler.bind(n.instance))},1e3*(e.conf.showDelay||0))},s);function s(t){this.adUnitId=t,this.init()}n.TopRoll=t},{"../../common/EventManager":4,"../../common/Timers":7,"../PlacementManager":23}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Verification=void 0;var i=t("../../common/Timers"),o=t("../../common/EventManager"),r=t("../PlacementManager"),t=(s.prototype.init=function(){this.container=document.createElement("div"),this.container.setAttribute("id","tg-verification"),this.container.style.width="1px",this.container.style.height="1px",this.container.style.display="none",document.body.appendChild(this.container),this.id=r.createAdUnit({id:this.adUnitId,element:this.container,scriptWindow:window,window:window})},s.prototype.delete=function(){this.container.parentElement===document.body&&document.body.removeChild(this.container),o.unlisten(22,this.bannerChangedHandler);var t=r.getAdUnit(this.id);t&&t.delete()},s.prototype.someTagExists=function(){return null!==document.querySelector("script[data-ad-client="+s.adsTagCode+"]")},s.prototype.serveTag=function(){var t=document.createElement("script");t.async=!0,t.setAttribute("data-ad-client",s.adsTagCode),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",document.getElementsByTagName("head")[0].appendChild(t)},s.prototype.bannerChangedHandler=function(t){var e;t.id===this.id&&(!(e=t.getCurrentEntry())||e.isEmpty()||this.someTagExists()?this.delete():(this.serveTag(),t.disableRotation()))},s.log=function(t){},s.removeElements=function(t,e){t.parentNode&&t.parentNode.removeChild(t),s.searchForMainElement()},s.waitForInnerFrame=function(e,n){var i=window.setInterval(function(){var t;!n.contentDocument||(t=n.contentDocument.body.querySelector("iframe"))&&0<(t.src||"").indexOf(s.adsCode)&&(s.removeElements(e,2),window.clearInterval(i))},10)},s.checkRenderedScenario=function(e){var n=window.setInterval(function(){var t=e.querySelector("iframe");t&&(window.clearInterval(n),0<(t.src||"").indexOf(s.adsCode)?s.removeElements(e,1):s.waitForInnerFrame(e,t))},10)},s.searchForMainElement=function(){s.mainInterval=window.setInterval(function(){var t=document.querySelector("html > ins.adsbygoogle");t&&(window.clearInterval(s.mainInterval),s.checkRenderedScenario(t))},10)},s.create=function(t,e){var n=this;i.timeout(function(){n.instance=new s(parseInt(t)),o.listen(22,n.instance.bannerChangedHandler.bind(n.instance))},1e3*(e.conf.showDelay||0))},s.start=function(){window.addEventListener("message",function(t){t=t.data;t&&t.type&&"iat-verification"===t.type&&(0<s.mainInterval||s.searchForMainElement())})},s.mainInterval=0,s.adsTagCode="ca-pub-"+(s.adsCode="2329337138110868"),s);function s(t){this.adUnitId=t,this.init()}n.Verification=t},{"../../common/EventManager":4,"../../common/Timers":7,"../PlacementManager":23}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Megafone=void 0;var i=t("../../common/Parameters"),o=t("../../common/Utilities"),r=t("../../common/EventManager"),s=t("../PlacementManager"),t=(a.prototype.init=function(t){this.container=document.createElement("div"),this.container.className="iat-rtsad",this.container.style.width="380px",this.container.style.height="100%",this.container.style.display="none",document.body.appendChild(this.container),this.id=s.createAdUnit({id:t,element:this.container,scriptWindow:window,window:window})},a.prototype.loadAndServe=function(){var t=this,e=i.getBaseUrl(!0)+"/iat-megafone.js",e=o.BrowserUtils.getScriptElement(e+"?ts="+ +new Date);window.__iat_adUnit=s.getAdUnit(this.id),e.onload=function(){t.showed=!0},document.body.appendChild(e)},a.prototype.realtimeDeliveryHandler=function(t){var e;!t.lineId||this.showed||(e=s.getAdUnit(this.id))&&(e.realtimeDeliveryLineId=t.lineId,e.nextBanner({ignoreInViewRequisite:!0,ignoreDoNotRotate:!0}))},a.prototype.bannerChangedHandler=function(t){var e;t.id!==this.id||(e=t.getCurrentEntry())&&!e.isEmpty()&&(t.disableRotation(),this.loadAndServe())},a.create=function(t,e){this.instance=new a(parseInt(t)),r.listen(15,this.instance.realtimeDeliveryHandler.bind(this.instance)),r.listen(22,this.instance.bannerChangedHandler.bind(this.instance))},a);function a(t){this.showed=!1,this.init(t)}n.Megafone=t},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Utilities":8,"../PlacementManager":23}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MawManager=void 0;var r=t("../interfaces/Enums"),s=t("../common/Utilities"),i=t("./../common/EventManager"),o=t("../common/Timers"),a=t("./BrowserStateTracker"),c=t("./PlacementManager"),l=t("../common/Parameters"),t=(d.start=function(){i.listen(18,d.stateChangedHandler),window.addEventListener("message",d.onMessageReceived,!1),o.timeout(d.flushUnloadQueue,d.flushUnloadQueueInterval)},d.attach=function(t,e,n,i,o){o=s.BrowserUtils.getScriptElement(e,i,o);o.setAttribute("adUnitId",n),o.setAttribute("domain",s.BrowserUtils.getTopMostHostname()),o.setAttribute("path",s.BrowserUtils.getTopMostPath()),o.setAttribute("active",(a.getCurrentState()===r.BrowserState.Active).toString()),o.setAttribute("loaded","true"),o.setAttribute("lockedId",l.config.lockedId),o.setAttribute("messagingPath",l.config.messagingPath.replace("rt-pub","rt-maw")),o.setAttribute("defaultMessagingPath",l.config.defaultMessagingPath.replace("rt-pub","rt-maw")),t.appendChild(o),this.startTimer()},d.unload=function(t,e){d.unloadQueue.push({adUnitId:t,element:e})},d.register=function(t){this.startTimer(),d.broadcastToAllAdUnits({type:"iat-maw-registration-response",uniqueId:t.uniqueId,adUnitId:null,domain:s.BrowserUtils.getTopMostHostname(),path:s.BrowserUtils.getTopMostPath(),active:a.getCurrentState()===r.BrowserState.Active,lockedId:l.config.lockedId,messagingPath:l.config.messagingPath.replace("rt-pub","rt-maw"),defaultMessagingPath:l.config.defaultMessagingPath.replace("rt-pub","rt-maw")},!0)},d.onMawRotate=function(t){var e=c.getAdUnit(t.adUnitId);e&&e.onMawRotate(t.mawId)},d.startTimer=function(){d.stateTimer||(d.stateTimer=o.interval(function(){return d.stateChangedHandler()},1e3*d.stateTimerDelay))},d.showInsuredLayer=function(t){var e=new Image;e.src="https://www.insurads.com/images/logo-maw.png",e.style.setProperty("display","block"),e.style.setProperty("margin","auto"),e.style.setProperty("margin-top",t.clientHeight/2-19+"px"),e.style.setProperty("z-index","900");var n=document.createElement("div");n.style.setProperty("top","0"),n.style.setProperty("display","block"),n.style.setProperty("position","absolute"),n.style.setProperty("background-color","white"),n.style.setProperty("width",t.clientWidth+"px"),n.style.setProperty("height",t.clientHeight+"px"),n.style.setProperty("opacity","0"),n.appendChild(e),t.appendChild(n);var i=0,o=window.setInterval(function(){i+=.01,n.style.setProperty("opacity",i.toString()),1<=i&&clearInterval(o)},5)},d.onMessageReceived=function(t){if(t&&t.data&&t.data.type){var e=t.data;switch(e.type){case"iat-maw-rotate-request":e.adUnitId&&e.mawId&&d.onMawRotate(e);break;case"iat-maw-registration-request":e.uniqueId&&d.register(e)}}},d.broadcastToAllAdUnits=function(i,t){var o=this;(t=void 0===t?!1:t)||window.postMessage(i,"*");var e=!i.adUnitId;c.getAdUnits().filter(function(t){return e||t.adUnitId===i.adUnitId}).forEach(function(t){var e,n=t.getCurrentEntry();if(n&&n.currentFrame&&n.currentFrame.contentWindow)e=n.currentFrame.contentWindow;else{n=t.element.getElementsByTagName("iframe");if(0===n.length)return;e=n[0].contentWindow}e&&(i.adUnitId=t.id,o.nestedPostMessage(e,i))})},d.nestedPostMessage=function(t,e,n){if(void 0===n&&(n=0),t){t.postMessage(e,"*");for(var i=0;i<t.frames.length;i++)this.nestedPostMessage(t.frames[i],e,n+1)}},d.stateChangedHandler=function(t){t=t||a.getCurrentState(),d.broadcastToAllAdUnits({type:"iat-maw-browser-state",path:s.BrowserUtils.getTopMostPath(),active:t===r.BrowserState.Active})},d.flushUnloadQueue=function(){try{for(;d.unloadQueue.length;){var t,e=d.unloadQueue.pop();e&&(!e.element||(t=e.element.querySelector("script[iat-maw]"))&&t.setAttribute("loaded","false"),d.broadcastToAllAdUnits({type:"iat-maw-unload",adUnitId:e.adUnitId}))}}finally{o.timeout(d.flushUnloadQueue,d.flushUnloadQueueInterval)}},d.stateTimer=0,d.stateTimerDelay=3,d.unloadQueue=[],d.flushUnloadQueueInterval=250,d);function d(){}n.MawManager=t},{"../common/Parameters":6,"../common/Timers":7,"../common/Utilities":8,"../interfaces/Enums":10,"./../common/EventManager":4,"./BrowserStateTracker":12,"./PlacementManager":23}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PassbackManager=void 0;var i=t("./dfp/utils"),t=(o.prototype.start=function(){window.addEventListener("message",this.messageListener.bind(this))},o.prototype.messageListener=function(t){t=t.data;t&&t.type&&t.adUnitId&&t.model&&"iat-passback"===t.type&&this.processPassback(t)},o.prototype.processPassback=function(t){var e=this.placementManager.getAdUnit(t.adUnitId);e?(e.addTargetingMap(t.model.ct),t.isAdhesion?this.proceedToNextEntry(e):this.createNewEntry(e)):this.logger.error("Unable to find unit with id "+t.adUnitId,"PassbackManager")},o.prototype.proceedToNextEntry=function(t){t=t.getCurrentEntry();t&&t.currentFrame&&t.currentFrame.contentWindow&&i.DfpUtils.passback(t.currentFrame.contentWindow)},o.prototype.createNewEntry=function(t){t.isFirstPrint=!0,t.enableRotation(),t.nextBanner({ignoreDoNotRotate:!0})},o);function o(t,e){this.placementManager=t,this.logger=e}n.PassbackManager=t},{"./dfp/utils":33}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PlacementManagerAPI=n.start=n.getAdUnit=n.deleteHouseAdUnits=n.deleteAdUnit=n.createAdUnit=n.getAdUnits=void 0;var o,i,r,s=t("./../common/Parameters"),a=t("./../common/EventManager"),c=t("./BrowserStateTracker"),l=t("./classes/AdUnit"),d=t("./../interfaces/Enums"),u=t("./../common/Utilities"),p=t("./../common/Timers"),g=t("./realtime-messaging/RealtimeMessaging"),h=t("../modules/API"),m={};function f(){var e=[];return(0,u.foreach)(m,function(t){e.push(m[t])}),e}function v(t){if(!t.id)return"";var e=(s.config.znl||{})[t.id.toString()]||{};if(e.dc&&-1===e.dc.toLowerCase().indexOf(d.DeviceType[s.config.device].toLowerCase()))return"";var n=-1,i=new RegExp("^"+t.id+"\\.(\\d{2})$");if((0,u.foreach)(m,function(t){t=i.exec(t);t&&(n=Math.max(n,parseInt(t[1])))}),99<++n)return"";e=new l.AdUnit(t,e,n);return m[e.id]=e,s.config.dads&&e.disableRotation(),a.emit(19,e),e.id}function y(t){var e;t.adUnitId&&(!(t=(e=m[t.adUnitId]).getCurrentEntry())||!t.cid||t.cid<=0||(t.buildTGIImpressionLoggingRequest(),e.onServerRotation()))}function w(){p.clear(i),i=p.timeout(function(){var i={state:c.getCurrentState(),tracking:[],adUnits:[],creatives:[],lines:[],slots:[]};(0,u.foreach)(m,function(t){var e,n=m[t];n.isInternal||(e=n.isInView(),n.isTrackingUnit?i.tracking.push(t+(e?":1":":0")):(n=n.getCurrentEntry(),i.adUnits.push(t+(e?":1":":0")),i.creatives.push(n&&n.cid?n.cid.toString():""),i.lines.push(n&&n.ol?n.ol.toString():""),i.slots.push(n?n.index:0)))}),p.clear(o),g.RealtimeMessaging.sendStatusUpdate(i),o=p.interval(function(){g.RealtimeMessaging.sendStatusUpdate(i)},r)},100)}function b(){var e=!1,n=(0,u.getViewport)();(0,u.foreach)(m,function(t){e=m[t].updateViewState(n)||e}),e&&w()}function M(t){var e=m[t];delete m[t],a.emit(20,e)}function S(){f().filter(function(t){return!t.isIntegration}).forEach(function(t){return t.delete()})}function I(t){return m[t]}n.getAdUnits=f,n.createAdUnit=v,n.deleteAdUnit=M,n.deleteHouseAdUnits=S,n.getAdUnit=I,n.start=function(){if(h.extend(h.ApiModule.PlacementManager,new C),window.__tgunits)for(var t=window.__tgunits.length;-1<--t;)v(window.__tgunits[t]);window.__tgunits={push:v,length:0},r=1e3*(s.config.mpi||30),a.listen(1,b),a.listen(2,b),a.listen(18,w),a.listen(12,w),a.listen(22,w),a.listen(20,w),a.listen(14,y)};var C=(T.prototype.getAdUnits=f,T.prototype.createAdUnit=v,T.prototype.deleteAdUnit=function(t){M(t)},T.prototype.deleteHouseAdUnits=function(){S()},T.prototype.getAdUnit=I,T);function T(){}n.PlacementManagerAPI=C},{"../modules/API":11,"./../common/EventManager":4,"./../common/Parameters":6,"./../common/Timers":7,"./../common/Utilities":8,"./../interfaces/Enums":10,"./BrowserStateTracker":12,"./classes/AdUnit":27,"./realtime-messaging/RealtimeMessaging":36}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RotationRulesAnalyticsManager=void 0;var i=(o.start=function(t){this.instance=new o(t),this.instance.eventManager.listen(19,this.instance.onCreateAdUnit.bind(this.instance)),this.instance.eventManager.listen(20,this.instance.onRemoveAdUnit.bind(this.instance))},o.getRotationRulesPotentials=function(t,e){t=this.instance.adUnitAnalyticsMap[t];return t?t.getRulesToEmit(e).map(function(t){return t.ruleId}):[]},o.prototype.onCreateAdUnit=function(t){var e;t.analytics&&t.analytics.length&&(e=t.analytics.map(function(t){return new a(t.ruleId,t.impDur)}),this.adUnitAnalyticsMap[t.uniqueId]=new r(e))},o.prototype.onRemoveAdUnit=function(t){this.adUnitAnalyticsMap[t.uniqueId]&&delete this.adUnitAnalyticsMap[t.uniqueId]},o);function o(t){this.eventManager=t,this.adUnitAnalyticsMap={}}n.RotationRulesAnalyticsManager=i;var r=(s.prototype.getRulesToEmit=function(e){return this.rules.filter(function(t){return t.shouldEmit(e)})},s);function s(t){this.rules=t}var a=(c.prototype.shouldEmit=function(t){t=Math.floor(t/this.impressionDuration)>this.currentPotentialRotation;return t&&(this.currentPotentialRotation++,1===this.currentPotentialRotation&&(this.impressionDuration+=1e3*c.RoundTripDelay)),t},c.DefaultImpressionDuration=20,c.RoundTripDelay=2,c);function c(t,e){this.ruleId=t,this.currentPotentialRotation=0,this.impressionDuration=1e3*(e||c.DefaultImpressionDuration)}},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SinglePageApplicationManager=void 0;var i=t("../common/Parameters"),o=t("../modules/PlacementManager"),r=t("../common/Utilities"),s=t("../common/Timers"),t=(a.prototype.start=function(){this.previousUrl=r.BrowserUtils.getTopMostPageUrl(),s.interval(this.checkLocationChanged.bind(this),200)},a.prototype.checkLocationChanged=function(){var t=r.BrowserUtils.getTopMostPageUrl();this.previousUrl!==t&&(this.previousUrl=t,this.performInitRequest())},a.prototype.performInitRequest=function(){var e=this,t=i.config.rootPath+"/init?appId="+i.config.publicId+"&h="+encodeURIComponent(r.BrowserUtils.getTopMostPageUrl())+"&ls=0&t="+ +new Date;r.BrowserUtils.buildRequestByUrl(document.body,t,function(t){e.processInitResponse(t.__tgconf),window.top&&window.top.__tginitcb&&window.top.__tginitcb()})},a.prototype.processInitResponse=function(t){t&&(o.deleteHouseAdUnits(),i.updateConfiguration(t),this.eventManager.emit(8,null))},a);function a(t){this.eventManager=t}n.SinglePageApplicationManager=t},{"../common/Parameters":6,"../common/Timers":7,"../common/Utilities":8,"../modules/PlacementManager":23}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AmazonPublisherServicesIntegration=void 0;var i=t("../API"),r=t("../dfp/utils"),s=t("../tcf/tcf"),o=t("../../interfaces/Enums"),a=t("../../common/Utilities"),c=t("../../common/Parameters"),l=t("../../common/Timers");(t={}).NoBidRequestToUAM="0",t.NoResponseReceivedFromUAM="1",t.ResponseWithNoBidFromUAM="2";d.prototype.render=function(n){var i=this;try{if(!(n.window&&n.path&&n.sizes&&n.sizes.length))return;if(!s.TcfIntegration.isAllowed(o.TCFVendors.Amazon))return void r.DfpUtils.passback(n.window);s.TcfIntegration.gdprApplies()&&a.BrowserUtils.attachScriptToElement(c.getBaseUrl(!0)+"/iat-tcf-api-proxy.js",n.window.document.head,!1),this.loadAps(n.window),r.DfpUtils.loadGptAndCreateSlotDiv(n.window,function(t,e){return i.defineSlotAndPerformBid(t,e,n)})}catch(t){r.DfpUtils.passback(n.window)}},d.prototype.loadAps=function(t){var e=t.document.createElement("script");e.innerText='!function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");',t.document.getElementsByTagName("head")[0].appendChild(e),t.apstag.init({pubID:"6f354287-be81-4032-bf64-3a62262fb72f",adServer:"googletag"})},d.prototype.defineSlotAndPerformBid=function(e,n,i){var o=this;e.cmd.push(function(){var t=e.defineSlot(i.path,i.sizes,n);t?(t.addService(e.pubads()),e.pubads().enableSingleRequest(),e.pubads().disableInitialLoad(),e.enableServices(),s.TcfIntegration.gdprApplies()?o.waitForTcfToMakeBidRequest(i,t):o.makeBidRequest(i,t)):r.DfpUtils.passback(i.window)})},d.prototype.waitForTcfToMakeBidRequest=function(n,i){var o,t=this;n.window.__tcfapi?(o=this,n.window.__tcfapi("addEventListener",2,function(t,e){e&&("useractioncomplete"!==t.eventStatus&&"tcloaded"!==t.eventStatus||o.makeBidRequest(n,i))})):l.timeout(function(){return t.waitForTcfToMakeBidRequest(n,i)},0)},d.prototype.makeBidRequest=function(e,n){var i=[];n.getSizes().forEach(function(t){i.push([t.getWidth(),t.getHeight()])}),e.window.apstag.fetchBids({slots:[{slotID:n.getSlotElementId(),slotName:n.getAdUnitPath(),sizes:i}],timeout:this.BID_TIMEOUT},function(t){switch((0<t.length?t[0]:{amznbid:"2"}).amznbid){case"0":case"1":case"2":r.DfpUtils.passback(e.window);break;default:e.window.googletag.cmd.push(function(){e.window.apstag.setDisplayBids(),e.window.googletag.pubads().refresh([n])})}})},t=d;function d(){this.BID_TIMEOUT=2e3,i.extend(i.ApiModule.APS,this)}n.AmazonPublisherServicesIntegration=t},{"../../common/Parameters":6,"../../common/Timers":7,"../../common/Utilities":8,"../../interfaces/Enums":10,"../API":11,"../dfp/utils":33,"../tcf/tcf":37}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdUnit=void 0;var r=t("../../interfaces/Enums"),s=t("../BrowserStateTracker"),w=t("../../common/Utilities"),o=t("../../common/Timers"),b=t("../../common/Parameters"),l=t("../../common/EventManager"),a=t("../PlacementManager"),d=t("./Entry"),c=t("../../common/Utilities"),i=t("../realtime-messaging/RealtimeMessaging"),u=t("../MawManager"),p=t("../tcf/tcf"),g=t("../dfp/utils"),h=t("../RotationRulesAnalyticsManager"),m=t("../API"),t=(f.prototype.evaluateNoRefreshCreativeHook=function(t){if(b.config.noRefreshCreativeContent)try{var e=t.element.querySelector("iframe");e&&e.contentDocument&&new String(e.contentDocument.body.innerHTML).includes(b.config.noRefreshCreativeContent)&&(t.dnr=!0,t.dnrReason=["Blocked by creative content"])}catch(t){}},Object.defineProperty(f.prototype,"doNotRotate",{get:function(){var t=this.getCurrentEntry();return this.dnr||t&&t.dnr||!1},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isInternal",{get:function(){return this.type===r.AdUnitType.verification||this.type===r.AdUnitType.toproll},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"logPotentials",{get:function(){return!this.isInternal&&this.type!==r.AdUnitType.megafone},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"logPotentialRotations",{get:function(){return this.logPotentials&&!b.config.dads},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"ignoreNextServerRotation",{get:function(){return null!=this.parentElement&&"1"===this.parentElement.getAttribute("iat-insr")},set:function(t){this.parentElement&&this.parentElement.setAttribute("iat-insr",t?"1":"0")},enumerable:!1,configurable:!0}),f.prototype.getCurrentEntry=function(){return this.queue[this.currentEntryIndex]},f.prototype.disableRotation=function(){this.dnr=!0},f.prototype.enableRotation=function(){this.dnr=!1},f.prototype.logPotentialImpression=function(){this.logPotentials&&(i.RealtimeMessaging.sendPotentialLog({type:1,id:this.adUnitId,isTracking:this.isTrackingUnit}),this.potImpCompleted=!0)},f.prototype.delete=function(){u.MawManager.unload(this.id,this.element),a.deleteAdUnit(this.id),b.config.device===r.DeviceType.Desktop&&(this.element.removeEventListener("mouseover",this.mouseOverHandler),this.element.removeEventListener("mouseout",this.mouseOutHandler)),l.unlisten(18,this.stateChangeHandler),this.timerCountHandler&&(o.clear(this.timerCountHandler),this.timerCountHandler=void 0)},f.prototype.isInView=function(){return this.pctInView<this.visibilityThreshold?r.UnitViewState.NotVisible:r.UnitViewState.Visible},f.prototype.updateThreshold=function(t,e){this.visibilityThreshold=242500<=t*e?30:50},f.prototype.updateViewState=function(t){var e,n=0,i=0,o="",r=w.getElementSize(this.element),s=!(b.config.blanks&&b.config.blanks.ignoreMinSize)&&r.isTooSmall();if(!this.isTrackingUnit&&s)e=0;else{var a=!1;do{try{for(var c,l,d,u,p,g=(d=l?(l=(c=l).parent,c.frameElement):(l=this.unitWindow,this.element)).getBoundingClientRect(),h=d,m=void 0,f=h.ownerDocument.defaultView.getComputedStyle(h),v=h.getBoundingClientRect();"HTML"!==h.nodeName&&h.parentNode&&!o;){if(h===m&&(m=void 0),!f||"none"!==f.display&&"hidden"!==f.visibility||(a=!0),m||(u=(g.top<v.top?v.top-g.top:0)+(g.bottom>v.bottom?g.bottom-v.bottom:0),"hidden"===f.overflowY&&.5<u/g.height&&(a=!0),p=(g.left<v.left?v.left-g.left:0)+(g.right>v.right?g.right-v.right:0),"hidden"===f.overflowX&&.5<p/g.width&&(a=!0)),f&&"fixed"===f.position)break;m=m||(f&&"absolute"===f.position?h.offsetParent:null),f=(h=h.parentNode).ownerDocument.defaultView.getComputedStyle(h),v=h.getBoundingClientRect()}n+=g.top,i+=g.left}catch(t){o="frames"}}while(l!==window&&!a);e=a?0:0<=n&&n+r.height<=t.height&&0<=i&&i+r.width<=t.width?100:(n+r.height<0||n>t.height)&&(i+r.width<0||i>t.width)?0:(s=r.height,n<0&&(s+=n),n+r.height>t.height&&(s+=t.height-n-r.height),y=r.width,i<0&&(y+=i),i+r.width>t.width&&(y+=t.width-i-r.width),Math.round(Math.max(0,s)*Math.max(y)/(r.height*r.width)*100)||0)}var y=this.isInView();this.position.width=r.width,this.position.height=r.height,this.position.top=n,this.position.left=i,this.position.absTop=n+t.top,this.isInternal?this.pctInView=100:this.pctInView=o?0:e;y=y!==this.isInView();return y&&this.onStateChange(),y},f.prototype.onStateChange=function(){var t=this.getCurrentEntry();l.emit(21,this),s.getCurrentState()===r.BrowserState.Active||this.handleNextReengagement||(this.handleNextReengagement=!0),this.isInView()&&s.getCurrentState()===r.BrowserState.Active?!(-1<this.rotateIndexOnView)||this.hovering&&t?t&&t.startViewableLoggingTimer():this.loadNextSlot(this.rotateIndexOnView):this.isInView()&&s.getCurrentState()===r.BrowserState.Active||t&&t.stopViewableLoggingTimer()},f.prototype.onPublisherBlank=function(t){this.id!==t||(t=this.getCurrentEntry())&&t.currentFrame&&t.currentFrame.contentWindow&&g.DfpUtils.passback(t.currentFrame.contentWindow)},f.prototype.isReferenceValid=function(){try{if(!this.scriptWindow||!this.scriptWindow.document||!this.scriptWindow.document.contains(this.element)&&!document.contains(this.element)||!this.scriptWindow.top||this.unitWindow!==this.scriptWindow&&this.scriptWindow===this.scriptWindow.parent)return this.delete(),!1}catch(t){return!1}return!0},f.prototype.timeCounter=function(){var t,e,n;this.isReferenceValid()&&((t=+new Date)-this.lastTick<450||(this.isInView()&&r.BrowserState.Active===s.getCurrentState()&&(this.timeInView+=600<t-this.lastTick?600:t-this.lastTick,this.logPotentials&&this.potImpCompleted&&!this.potIabCompleted&&1e3<this.timeInView&&(i.RealtimeMessaging.sendPotentialLog({type:2,id:this.adUnitId,isTracking:this.isTrackingUnit}),this.potIabCompleted=!0),this.logPotentialRotations&&this.potIabCompleted&&Math.floor(this.timeInView/this.impressionDuration)>this.potRotation&&(i.RealtimeMessaging.sendPotentialLog({type:3,id:this.adUnitId,isTracking:this.isTrackingUnit}),this.potRotation++),this.logPotentialRotations&&this.potIabCompleted&&0<this.analytics.length&&(0<(e=h.RotationRulesAnalyticsManager.getRotationRulesPotentials(this.uniqueId,this.timeInView)).length&&(n=this.dfpMapping&&this.dfpMapping.dfpAdUnit?"dfp":"sas",i.RealtimeMessaging.sendPotentialLog({type:4,id:this.adUnitId,rules:{type:n,ruleIds:e}}))),this.handleNextReengagement&&s.minimumDurationForReengagementReached()&&this.potIabCompleted&&(this.timeInView=this.impressionDuration+1,this.handleNextReengagement=!1,this.rotateOnClient=!this.doNotRotate,this.ignoreNextServerRotation=this.rotateOnClient),this.rotateOnClient&&this.timeInView>this.impressionDuration&&(this.rotateOnClient=!1,this.nextBanner())),this.lastTick=t))},f.prototype.onServerRotation=function(){var t;this.ignoreNextServerRotation?this.ignoreNextServerRotation=!1:(t=this.getCurrentEntry())&&t.isGptInsideAdhesion()||this.nextBanner()},f.prototype.onMawRotate=function(t){var e=this;this.rotateOnClient||(this.ignoreNextServerRotation=!0),this.rotateOnClient=!1,o.timeout(function(){e.nextBanner({mawId:t,ignoreDoNotRotate:!0})},1e3)},f.prototype.nextBanner=function(t){var e;this.rotating||this.isTrackingUnit||!p.TcfIntegration.isAllowed(r.TCFVendors.Google)&&this.type!==r.AdUnitType.megafone||(e=!!t&&t.ignoreDoNotRotate,this.doNotRotate&&!e||(this.rotating=!0,this.newSlot(t)))},f.prototype.getMetaKeys=function(){var t={},e=document.querySelector?document.querySelector("meta[name='TG-Custom-Targeting']"):null;if(e)for(var n=e.content.replace(/\'/g,"").split(";"),i=n.length-1;-1<i;i--){var o=n[i].split("=");o[1]&&(t[o[0].toLowerCase()]=o[1].split("&"))}return t},f.prototype.getDfpPageKeys=function(){var t=b.config.integrations.dfp,t=t&&t.keyValues;if(!t||!t.length)return{};t=g.DfpUtils.getGptWindow(this.unitWindow);if(!g.DfpUtils.isGptAvailable(t))return{};var e={},n=t.googletag.pubads();return n.getTargetingKeys().forEach(function(t){return e[t]=n.getTargeting(t)}),e},f.prototype.getCustomTarget=function(){var t=w.extendCustomTargeting(this.getMetaKeys(),this.ct);this.dfpMapping&&this.dfpMapping.ct&&(t=w.extendCustomTargeting(t,this.dfpMapping.ct));var e,n={};for(e in t=w.extendCustomTargeting(t,this.getDfpPageKeys()))e.startsWith("hb_")||(n[e]=t[e]);return n},f.prototype.addTargetingMap=function(t){var e;!t||(e=this.unitWindow.googletag.pubads().getSlotIdMap()[g.DfpUtils.getSlotId(this.element)])&&(this.ct=w.extendCustomTargeting(this.ct,t),t=w.extendCustomTargeting(e.getTargetingMap(),t),e.updateTargetingFromMap(t))},f.prototype.getSizes=function(){var t,e=this.sizes,n=e[0];e=b.config.device===r.DeviceType.Mobile?e.filter(function(t){return t[0]<=320}):(t=[[320,50],[320,100],[300,50],[300,100]],e.filter(function(e){return!t.find(function(t){return t[0]===e[0]&&t[1]===e[1]})})),n&&!e.find(function(t){return t[0]===n[0]&&t[1]===n[1]})&&e.push(n);var i=w.getViewport().width;return e=(e=e.filter(function(t){return t[0]<=i}))&&e.length?e.sort(function(t,e){return e[0]<t[0]||e[0]===t[0]&&e[1]<t[1]?1:-1}):e},f.prototype.getCreativeSize=function(){var t,e=[];return this.sizes&&0<this.sizes.length?e=this.sizes[0]:(t=this.getCurrentEntry())&&(e=[t.cw,t.ch]),e},f.prototype.newSlot=function(t){var e=document.createElement("div"),n="display:none; clear:both;"+(this.isPositionSticky?"":"margin:0px auto; text-align:center!important; position:relative;");e.setAttribute("style",n),e.setAttribute("class","tg--slot tg--slot-"+this.queue.length),this.element.appendChild(e);n=!!t&&t.ignoreInViewRequisite,t=new d.Entry(this,this.queue.length,e,n,t&&t.mawId);this.queue.push(t),this.evaluateStickyHook(),this.requestAd(t)},f.prototype.evaluateStickyHook=function(){var t,e,n=this,i=b.config.stickyCloseButton;i&&(!(t=this.element&&this.element.parentElement)||t.id!==i.slotDomElementId||(e=t.querySelector(i.cssSelector))&&(w.setCssProperty(e,"display","none","important"),i.timeout&&(o.clear(this.stickyHookTimer),this.stickyHookTimer=o.timeout(function(){t&&n.isReferenceValid()&&w.setCssProperty(e,"display","block","important")},1e3*i.timeout))))},f.prototype.getDeliveryMode=function(t){return this.isFirstPrint&&(0===t.index||this.queue.filter(function(t){return t.state===r.EntryState.Blank}).length===this.queue.length-1)?1:2},f.prototype.requestAd=function(n){var i=this,t=b.config.rootPath+"/ad?auid="+this.adUnitId+"&csz="+encodeURIComponent(JSON.stringify(this.getCreativeSize()))+"&sz="+encodeURIComponent(JSON.stringify(this.getSizes()))+"&appId="+b.config.appId+"&s="+b.config.section+"&dm="+this.getDeliveryMode(n)+"&is="+n.index+"&ct="+encodeURIComponent(JSON.stringify(this.getCustomTarget()))+"&h="+encodeURIComponent(c.BrowserUtils.getTopMostPageUrl())+"&sid="+b.config.sessionId+"&v="+b.config.version+"&ts="+ +new Date+"";(this.sasKeywords||this.sasTagId)&&(t+="&sasKeywords="+encodeURIComponent(this.sasKeywords)+"&sasTagId="+this.sasTagId),0<this.realtimeDeliveryLineId&&(t+="&rdolid="+this.realtimeDeliveryLineId);var e=this.getCurrentEntry();e&&e.ol&&0<e.ol&&(t+="&ll="+e.ol),n.mawId&&(t+="&mawId="+n.mawId),c.BrowserUtils.buildRequestByUrl(n.container,t,function(t){var e=t._tg,t=t._tgblk;e&&Array.isArray(e)?n.updateWithResponse(e,t):n.updateWithBlankResponse(t),n.state===r.EntryState.Blank?(i.onBlank(n),i.currentEntryIndex=n.index):n.index===i.queue.length-1&&(i.loadNextSlot(n.index),n.mawId&&(i.dnr=!1))})},f.prototype.loadNextSlot=function(t){var e=this.getCurrentEntry(),n=this.queue[t],i=this.isInView()&&s.getCurrentState()===r.BrowserState.Active,o=e&&this.hovering;if(!n.ignoreInViewRequisite&&(!i||o))return this.rotateIndexOnView=t,void u.MawManager.unload(this.id,this.element);n.loadNextCreative()?(u.MawManager.unload(this.id,this.element),this.rotating=!1,e&&e.stopViewableLoggingTimer(),this.changeVisibleSlot(n),this.currentEntryIndex=n.index,l.emit(22,this),n.buildStdImpressionLoggingRequest(),n.startViewableLoggingTimer(),this.rotateIndexOnView=-1):n.state===r.EntryState.Blank?this.onBlank(n):(this.rotateIndexOnView=t,u.MawManager.unload(this.id,this.element))},f.prototype.resizeParent=function(t){w.tryParseInt((this.element.style.width||"").replace("px",""))<t.cw&&(this.element.style.width=t.cw+"px"),w.tryParseInt((this.element.style.height||"").replace("px",""))<t.ch&&(this.element.style.height=t.ch+"px")},f.prototype.broadcastImpression=function(t){var e=g.DfpUtils.getSlotId(this.element);window.postMessage({type:"iat-impression",id:e,cw:(this.dfpMapping||t).cw,ch:(this.dfpMapping||t).ch,targeting:this.dfpMapping&&this.dfpMapping.ct?this.dfpMapping.ct:void 0},"*")},f.prototype.showPriorEntry=function(){for(var t=this.queue.length-2;-1<t;t--){var e=this.queue[t];if(e.state!==r.EntryState.Blank&&e.container)return void w.setCssProperty(e.container,"display","block","important")}for(var n=this.element.getElementsByClassName("tg-hidden"),t=n.length;-1<--t;)n[t].style.display="",w.removeClass(n[t],"tg-hidden")},f.prototype.changeVisibleSlot=function(t){for(var e=!1,n=this.currentEntryIndex;-1<n;n--){var i=this.queue[n];i.container&&(e?i.container.parentNode===this.element&&this.element.removeChild(i.container):e=!0)}if(0<=this.currentEntryIndex)for(var o=this.element.childNodes,n=o.length;-1<--n;){var r,s=o[n];s.getAttribute&&(r=s.getAttribute("class"),"none"===s.style.display||r&&-1!==r.split(" ").indexOf("tgOverlay")||(w.setCssProperty(s,"display","none","important"),w.addClass(s,"tg-hidden")))}w.setCssProperty(t.container,"display","block","important")},f.prototype.onBlank=function(t){this.rotating=!1,t.setBlank(),t.stopViewableLoggingTimer(),l.emit(22,this),t.buildBlankLoggingRequest(),this.showPriorEntry(),(0===t.index||t.isPublisherMarket()||t.mawId)&&(this.rotateOnClient=!0,this.timeInView=0,this.potRotation=0)},f.prototype.onMouseOver=function(){this.hovering=!0},f.prototype.onMouseOut=function(){this.hovering=!1,this.onStateChange()},f.prototype.getSlotSizes=function(t){var e=t.getSizes();if(e.length){for(var n=[],i=e.length;-1<--i;)try{n.push([e[i].getWidth(),e[i].getHeight()])}catch(t){}return n}},f.prototype.loadDfpCreative=function(t){var e=this;if(this.dfpMapping=t,this.sizes=[[t.cw,t.ch]],g.DfpUtils.isGptAvailable(this.unitWindow))try{var n,i,o=this.unitWindow.googletag.pubads().getSlotIdMap()[g.DfpUtils.getSlotId(this.element)];o&&(t.ct=o.getTargetingMap(),(i=this.getSlotSizes(o))&&0<i.length&&(0<this.sizes.length&&(n=this.sizes[0],i=i.filter(function(t){return!(t[0]===n[0]&&t[1]===n[1])})),i.forEach(function(t){e.sizes.push(t)})),c=o.getTargeting("tgRotSlot"),t.slot=0<c.length?Number(c[0]):0)}catch(t){}if(!this.isFirstPrint){for(var r=t.slot;r--;)this.queue.push(new d.Entry(this,++this.currentEntryIndex));var s,a,c=new d.Entry(this,++this.currentEntryIndex,void 0,void 0);this.rotateOnClient=!t.dnr,this.queue.push(c),this.currentEntryIndex=c.index,l.emit(22,this),this.element.parentNode&&this.unitWindow&&this.unitWindow.MutationObserver&&(s=this,(a=new MutationObserver(function(t){t.forEach(function(t){t.oldValue&&(0<=t.oldValue.indexOf("visibility")||0<=t.oldValue.indexOf("display"))&&s.updateViewState(w.getViewport())}),a.disconnect()})).observe(this.element.parentNode,{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})),this.onStateChange()}},f.prototype.loadSasCreative=function(t){if(this.dfpMapping=t,this.sizes=[[t.cw,t.ch]],!t.tagId||(n=(n=m.get(m.ApiModule.SAS))?n.getPrintedInformationForTag(t.tagId):void 0)&&(this.sasKeywords=encodeURIComponent(n.keywords),this.sasTagId=n.tagId),!this.isFirstPrint){for(var e=t.slot;e--;)this.queue.push(new d.Entry(this,++this.currentEntryIndex));var n=new d.Entry(this,++this.currentEntryIndex,void 0,void 0);this.rotateOnClient=!t.dnr,this.queue.push(n),this.currentEntryIndex=n.index,l.emit(22,this),this.onStateChange()}},f.prototype.loadDfpCreativeOnAdhesion=function(t,e){var n,i,o=this;t.firstElementChild&&(this.dfpMapping=e,this.sizes=[[e.cw,e.ch]],(i=t.ownerDocument.defaultView.googletag.pubads().getSlotIdMap()[g.DfpUtils.getSlotId(t.firstElementChild)])&&(e.ct=i.getTargetingMap(),(t=this.getSlotSizes(i))&&0<t.length&&(0<this.sizes.length&&(n=this.sizes[0],t=t.filter(function(t){return!(t[0]===n[0]&&t[1]===n[1])})),t.forEach(function(t){o.sizes.push(t)})),i=i.getTargeting("tgRotSlot"),e.slot=0<i.length?Number(i[0]):0),this.timeInView=0,this.potRotation=0,this.dnr=e.dnr||!1,e.impDur&&0<e.impDur&&(this.impressionDuration=1e3*e.impDur),this.analytics=e.analytics||[],this.rotateOnClient=!e.dnr,e.ruleId&&(this.ct["iat-rotation-rule"]=[e.ruleId.toString()]),(e=this.getCurrentEntry())&&e.setAsGptInsideAdhesion(),l.emit(22,this),l.emit(19,this))},f.findAdhesionAndLoadDfpCreative=function(t,e){var n,i=t.ownerDocument.defaultView.frameElement;i&&i.parentElement&&i.parentElement.parentElement&&((i=(n=i.parentElement.parentElement).getAttribute("id"))&&i.startsWith("tg-adhesion-banner-id-")&&(!(n=n.getAttribute("TG-Zone"))||(n=a.getAdUnit(n))&&n.loadDfpCreativeOnAdhesion(t,e)))},f.prototype.init=function(t){var e=w.getViewport();this.updateViewState(e),this.type===r.AdUnitType.bottom&&!this.isTrackingUnit||this.logPotentialImpression(),l.listen(18,this.stateChangeHandler),l.listen(24,this.publisherBlankHandler),this.element.setAttribute("TG-Zone",this.id),b.config.device===r.DeviceType.Desktop&&(this.element.addEventListener("mouseover",this.mouseOverHandler),this.element.addEventListener("mouseout",this.mouseOutHandler)),t.dfpAdUnit?this.loadDfpCreative(t):t.sasAdUnit&&this.loadSasCreative(t),this.isFirstPrint?this.nextBanner({ignoreInViewRequisite:!t.eid}):0===this.queue.length&&this.queue.push(new d.Entry(this,++this.currentEntryIndex)),this.timerCountHandler=o.interval(this.timeCounter.bind(this),500)},f);function f(t,e,n){this.hovering=!1,this.rotateIndexOnView=-1,this.timeInView=0,this.queue=[],this.currentEntryIndex=-1,this.realtimeDeliveryLineId=0,this.stickyHookTimer=0,this.pctInView=0,this.visibilityThreshold=50,this.potImpCompleted=!1,this.potIabCompleted=!1,this.potRotation=0,this.handleNextReengagement=!1,this.stateChangeHandler=this.onStateChange.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.publisherBlankHandler=this.onPublisherBlank.bind(this),this.evaluateNoRefreshCreativeHook(t),this.id=t.id+"."+("0"+n).slice(-2),this.config=e.conf,this.adUnitId=t.id.toString(),this.type=e.type?r.AdUnitType[e.type]:r.AdUnitType.normal,this.element=t.element,this.parentElement=t.element.parentElement,this.ct=t.ct||{},this.sasKeywords="",this.sasTagId="",this.sizes=t.sizes||[],this.scriptWindow=t.scriptWindow,this.unitWindow=t.window,this.isTrackingUnit=e.tu||!1,this.isFirstPrint=e.fp||t.firstPrint||!1,this.rotateOnClient=!this.isFirstPrint,this.dnr=t.dnr||!1,this.analytics=t.analytics||[],this.realtimeDeliveryLineId=t.realtimeDeliveryLineId||0,this.isIntegration=t.dfpAdUnit||t.sasAdUnit||!1,this.rotating=!1,this.ignoreNextServerRotation=!1,this.lastTick=+new Date,this.isPositionSticky="sticky"===window.getComputedStyle(this.element).position,this.impressionDuration=1e3*(b.config.pid||20),t.impDur&&0<t.impDur&&(this.impressionDuration=1e3*t.impDur),this.position={width:0,height:0,top:0,left:0,absTop:0},t.ruleId&&(this.ct["iat-rotation-rule"]=[t.ruleId.toString()]),this.uniqueId=w.CryptoUtils.generateUniqueId(),this.init(t)}n.AdUnit=t},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Timers":7,"../../common/Utilities":8,"../../interfaces/Enums":10,"../API":11,"../BrowserStateTracker":12,"../MawManager":21,"../PlacementManager":23,"../RotationRulesAnalyticsManager":24,"../dfp/utils":33,"../realtime-messaging/RealtimeMessaging":36,"../tcf/tcf":37,"./Entry":28}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Entry=void 0;var o=t("../../common/Utilities"),r=t("../../interfaces/Enums"),i=t("../BrowserStateTracker"),s=t("../../common/Timers"),a=t("../../common/Parameters"),c=t("../../common/EventManager"),t=(l.prototype.updateWithResponse=function(t,e){this.state=r.EntryState.Response,this.creativeWaterfall=t,this.blankRequest=e},l.prototype.updateWithBlankResponse=function(t){this.state=r.EntryState.Blank,this.blankRequest=t},l.prototype.isEmpty=function(){return!this.ol&&!this.adUnit.dfpMapping||"none"===this.container.style.display},l.prototype.isPublisherMarket=function(t){return 0<=(t=t||this.m||"").toUpperCase().indexOf("DFP")},l.prototype.setBlank=function(){this.state=r.EntryState.Blank,this.ol=void 0,this.cid=void 0},l.prototype.setAsGptInsideAdhesion=function(){this.currentFrame.setAttribute("iat-gpt","1"),this.cid=void 0,this.ol=void 0},l.prototype.isGptInsideAdhesion=function(){return this.currentFrame&&"1"===this.currentFrame.getAttribute("iat-gpt")},l.prototype.passbackListener=function(t){try{"TG-SP"===t.data?(this.currentFrame.removeEventListener("message",this.passbackListener),o.setCssProperty(this.currentFrame,"display","none","important"),this.loadNextCreative()&&c.emit(23,this.adUnit)):"click"===t.data.action&&window.open(this.cu,"_blank")}catch(t){}},l.prototype.loadNextCreative=function(){var e=this;if(this.state===r.EntryState.Blank)return!1;var t,n=this.creativeWaterfall[this.nextCreativeIndex];if(!n)return this.setBlank(),o.setCssProperty(this.container,"display","none","important"),this.adUnit.onBlank(this),!1;this.nextCreativeIndex++,"json"!==n.typ&&(t=document.createElement("iframe"),(this.currentFrame=t).setAttribute("scrolling","no"),t.setAttribute("frameborder","no"),t.setAttribute("iat-market",n.m),t.setAttribute("width",n.cw+"px"),t.setAttribute("height",n.ch+"px"),t.style.setProperty("border-width","0px"),t.style.setProperty("margin","0px auto"),t.style.setProperty("overflow","visible"),t.style.setProperty("width",n.cw+"px","important"),t.style.setProperty("height",n.ch+"px","important"),t.src="about:blank",this.container.appendChild(t),this.isPublisherMarket(n.m)&&(this.mawId&&0<this.mawId&&(n.cd=n.cd.replace("window: window","window: window, mawId: "+this.mawId)),0<n.cw&&0<n.ch&&(n.cd=n.cd.replace("window: window","window: window, layoutShiftSize: ["+n.cw+","+n.ch+"]"))),(i=t.contentDocument||(t.contentWindow?t.contentWindow.document:null))&&t.contentWindow&&(i.open("text/html","replace"),t.contentWindow.addEventListener("message",function(t){return e.passbackListener(t)}),i.write('<html><head></head><body style="margin: 0px; overflow: hidden; border: 0px"><script>'+n.cd+"<\/script></body></html>"),i.close()));var i=this.m;return this.cd=n.cd,this.iid=n.iid,this.ch=n.ch,this.cw=n.cw,this.m=n.m,this.dnr=n.dnr,this.cu=n.cu,this.typ=n.typ,this.gxiDuration=n.gxid,this.logData=!this.m||"House"===this.m,this.adUnit.updateThreshold(this.cw,this.ch),i&&this.m&&"House"!==i&&"House"!==this.m||(this.oid=n.oid,this.ol=n.li,this.cid=n.ci),this.adUnit.resizeParent(this),this.adUnit.broadcastImpression(this),!0},l.prototype.buildBaseLoggingRequest=function(t){return a.config.rootPath+"/"+t+"?appid="+a.config.appId+"&acid="+a.config.acId+"&s="+a.config.section+"&sid="+a.config.sessionId+"&auid="+this.adUnit.adUnitId+"&ts="+ +new Date},l.prototype.buildBlankLoggingRequest=function(){var t;this.blankRequest&&(t=this.buildBaseLoggingRequest("lb")+"&iid="+this.blankRequest.iid+"&is="+this.index+"&m="+this.blankRequest.m,o.generateBeacon(t))},l.prototype.buildBaseImpressionLoggingRequest=function(t){return this.buildBaseLoggingRequest(t)+"&iid="+this.iid+"&is="+this.index+"&ci="+this.cid+"&olid="+this.ol+"&oid="+this.oid+"&cw="+this.cw+"&ch="+this.ch},l.prototype.logImpression=function(t){this.iid&&this.logData&&o.generateBeacon(t)},l.prototype.buildStdImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("limp"))},l.prototype.stopViewableLoggingTimer=function(){this.viewableTimer&&(s.clear(this.viewableTimer),this.viewableTimer=void 0)},l.prototype.startViewableLoggingTimer=function(){var t=this;!this.adUnit.isInView()||this.viewableTimer||this.viewableCompleted||i.getCurrentState()!==r.BrowserState.Active||!this.cid||this.cid<0||(this.viewableTimer=s.timeout(function(){t.viewableCompleted=!0,t.buildViewableImpressionLoggingRequest()},1e3))},l.prototype.buildViewableImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("lvi"))},l.prototype.buildTGIImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("ltgi"))},l.prototype.buildGxiImpressionLoggingRequest=function(t){t=Math.round(t/1e3);var e=this.buildBaseImpressionLoggingRequest("lgxi");e+="&vt="+encodeURIComponent(btoa(t.toString())),this.logImpression(e)},l.prototype.buildSocialDataLoggingRequest=function(t){var e=this.buildBaseImpressionLoggingRequest("lsd");e+="&sd="+encodeURIComponent(btoa(t)),this.logImpression(e)},l);function l(t,e,n,i,o){void 0===i&&(i=!1),this.startTimestamp=+new Date,this.creativeWaterfall=[],this.viewableCompleted=!1,this.nextCreativeIndex=0,this.adUnit=t,this.state=r.EntryState.Request,this.index=e,this.ignoreInViewRequisite=i,this.logData=!0,this.mawId=o,n?this.container=n:this.setBlank()}n.Entry=t},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Timers":7,"../../common/Utilities":8,"../../interfaces/Enums":10,"../BrowserStateTracker":12}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CustomPolyfill=void 0;var i=(o.init=function(){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e=e||0,t.length)===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;o<n;){var r=e[o];if(t.call(i,r,o,e))return r;o++}},configurable:!0,writable:!0}),HTMLDocument.prototype.contains||(HTMLDocument.prototype.contains=function(t){if(this.body&&this.body.contains)return this.body.contains(t);var e=t;do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})},o);function o(){}n.CustomPolyfill=i},{}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DfpIntegrationApi=void 0;var i=t("../API"),o=t("../../interfaces/Enums"),r=t("./utils"),s=t("../../common/Timers"),a=t("../../common/Parameters"),c=t("../PlacementManager"),l=t("./mapping-service"),t=(d.prototype.render=function(e){var n=this;try{if(!e||!e.window)return;this.waitForMainGpt(function(){n.calculateReferences(e);var t=n.getSlot(e);t?t.getResponseInformation()?n.refreshSlot(e,t):r.DfpUtils.passback(e.window):n.loadGptAndCreateSlot(e)||r.DfpUtils.passback(e.window)})}catch(t){r.DfpUtils.passback(e.window)}},d.prototype.waitForMainGpt=function(t,e){var n=this;if((e=e||0)<=2e3&&!r.DfpUtils.isGptAvailable(window.top))return e+=500,void s.timeout(function(){return n.waitForMainGpt(t,e)},500);t()},d.prototype.calculateReferences=function(t){t.gptWindow=r.DfpUtils.getGptWindow(t.window);var e=t.window.frameElement,e=e&&e.parentNode;t.adUnitContainer=e?e.parentNode:null,t.adUnitContainer&&(t.slotDivId=r.DfpUtils.getSlotId(t.adUnitContainer))},d.prototype.getSlot=function(t){if(t.slotDivId&&r.DfpUtils.isGptAvailable(t.gptWindow))return t.gptWindow.googletag.pubads().getSlotIdMap()[t.slotDivId]},d.prototype.getValidPath=function(t){var e=o.DeviceType[a.config.device].toLowerCase(),n=t.paths&&t.paths[e];if((n=(n=n||t.paths&&t.paths.default)||t.path)&&""!==n.trim()){e=n.split("/").filter(function(t){return""!==t.trim()});return!a.config.integrations||!a.config.integrations.dfp||e[0]!==a.config.integrations.dfp.networkCode||t.slotDivId&&t.slotDivId.startsWith("tg-adhesion-banner-id-")?n:void 0}},d.prototype.loadGptAndCreateSlot=function(n){var i=this;n.gptWindow=n.window;var t=this.getValidPath(n);return!!t&&(n.path=r.DfpUtils.getFinalSlotPath(t),n.sizes=this.getSizesForNewSlot(n),!!(n.path&&n.sizes&&n.sizes.length)&&(r.DfpUtils.loadGptAndCreateSlotDiv(n.window,function(t,e){return i.createSlot(t,e,n)}),!0))},d.prototype.createSlot=function(t,e,i){var o=this;t.cmd.push(function(){var n=t.defineSlot(i.path,i.sizes,e).addService(t.pubads());o.copyCustomTargetingToNewGpt(i),o.setTargetingForSlot(i,n,!0),t.pubads().enableSingleRequest(),t.pubads().disableInitialLoad(),t.enableServices(),t.pubads().addEventListener("slotRenderEnded",function(t){var e;t.isEmpty?r.DfpUtils.passback(i.window):(t.size&&((e=i.window.frameElement).style.setProperty("width",t.size[0]+"px","important"),e.style.setProperty("height",t.size[1]+"px","important")),l.pushAdMappingRequest(n,t,i.window,!1))}),t.pubads().refresh([n])})},d.prototype.getSizesForNewSlot=function(t){if(t.sizes){if(Array.isArray(t.sizes))return t.sizes;var e=o.DeviceType[a.config.device].toLowerCase(),e=t.sizes[e];return e=(e=e||t.sizes.default)||t.sizes.all}},d.prototype.copyCustomTargetingToNewGpt=function(t){var e,n,i;!r.DfpUtils.isGptAvailable(window.top)||(n=(e=t.window.top&&t.window.top.googletag.pubads())&&e.getTargetingKeys())&&n.length&&(i=t.gptWindow.googletag.pubads(),n.forEach(function(t){i.setTargeting(t,e.getTargeting(t))}))},d.prototype.getRotationIndexForNewSlot=function(t){if(t.adUnitContainer){t=t.adUnitContainer.getAttribute("TG-Zone"),t=c.getAdUnit(t);if(t){t=t.getCurrentEntry();if(t)return 0===t.index?0:Math.min(t.index,5)}}return-1},d.prototype.setTargetingForSlot=function(t,e,n){var i,o={};if(t.customTarget&&(t.customTargetInAllSlots||n))if("string"==typeof t.customTarget)try{o=JSON.parse(t.customTarget)}catch(t){}else o=t.customTarget;o=r.DfpUtils.getFinalTargetingMap(o),t.mawId?(e.clearTargeting("tgRotSlot"),e.clearTargeting("iat-rot-slot-cd"),e.setTargeting("iat-maw",[t.mawId.toString()])):(i=-1,0<(i=n?this.getRotationIndexForNewSlot(t):(t=e.getTargeting("tgRotSlot"),Math.min(0<t.length?parseInt(t[0],void 0)+1:1,5)))&&(o.tgRotSlot=[i.toString()],o["iat-rot-slot-cd"]=[i.toString()]),e.updateTargetingFromMap(o))},d.prototype.applyLayoutShiftSize=function(t,e){if(!t.layoutShiftSize)return e;var n=t.gptWindow.googletag,i=e.getAdUnitPath(),o=e.getSlotElementId(),r=e.getTargetingMap(),s=t.layoutShiftSize,a=document.getElementById(o);if(a&&(a.style.minWidth=s[0]+"px",a.style.minHeight=s[1]+"px"),n.destroySlots([e]),n.pubads().getSlotIdMap()[e.getSlotId().getId()])return e;a=n.sizeMapping().addSize([0,0],s).build();return(e=n.defineSlot(i,s,o).defineSizeMapping(a).addService(n.pubads())).updateTargetingFromMap(r),t.window=window.top,e},d.prototype.processSuffixKeys=function(t,e){for(var n=t.suffixKeys||[],i=0;i<n.length;i++){for(var o=n[i],r=o[0],s=o[1],a=new RegExp("(("+s+")?$)","i"),c=e.getTargeting(r),l=c.length;-1<--l;)c[l]=c[l].replace(a,s);e.setTargeting(r,c)}},d.prototype.refreshSlot=function(n,i){i=this.applyLayoutShiftSize(n,i),this.setTargetingForSlot(n,i,!1),this.processSuffixKeys(n,i);var o,r=this.getPrebidCode(n,i);r?(o=n.window.top.pbjs).que.push(function(){o.requestBids({timeout:o.getConfig().bidderTimeout,adUnitCodes:[r],bidsBackHandler:function(t,e){o.setTargetingForGPTAsync([r]),n.gptWindow.googletag.pubads().refresh([i],{changeCorrelator:!1})}})}):n.gptWindow.googletag.pubads().refresh([i],{changeCorrelator:!1})},d.prototype.getPrebidCode=function(t,e){if(t.window.top&&t.window.top.pbjs&&t.window.top.pbjs.adUnits){t=t.window.top.pbjs.adUnits;return 0<=t.findIndex(function(t){return t.code===e.getAdUnitPath()})?e.getAdUnitPath():0<=t.findIndex(function(t){return t.code===e.getSlotElementId()})?e.getSlotElementId():void 0}},d);function d(){i.extend(i.ApiModule.DFP,this)}n.DfpIntegrationApi=t},{"../../common/Parameters":6,"../../common/Timers":7,"../../interfaces/Enums":10,"../API":11,"../PlacementManager":23,"./mapping-service":32,"./utils":33}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.start=void 0;var i=t("../../common/Timers"),o=t("../../common/Parameters"),r=t("./mapping-service"),s=t("./dfp-api"),a=t("./utils");function c(){var t;a.DfpUtils.isGptAvailable(window.top)?(window.googletag.pubads().addEventListener("slotRenderEnded",function(t){r.pushAdMappingRequest(t.slot,t)}),(t=a.DfpUtils.getFramesWithGpt()).forEach(function(e){e.googletag.pubads().addEventListener("slotRenderEnded",function(t){r.pushAdMappingRequest(t.slot,t,e)})}),i.timeout(function(){a.DfpUtils.isGptAvailable(window.top)&&window.googletag.pubads().getSlots().forEach(function(t){return r.pushAdMappingRequest(t)}),t.forEach(function(e){a.DfpUtils.isGptAvailable(e)&&e.googletag.pubads().getSlots().forEach(function(t){return r.pushAdMappingRequest(t,void 0,e)})})},2e3)):i.timeout(c,0)}n.start=function(){o.config.integrations.dfp&&(c(),r.start()),new s.DfpIntegrationApi}},{"../../common/Parameters":6,"../../common/Timers":7,"./dfp-api":30,"./mapping-service":32,"./utils":33}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.start=n.pushAdMappingRequest=void 0;var f=t("../../interfaces/Configuration"),v=t("../../interfaces/Enums"),y=t("../../common/Timers"),w=t("../../common/Utilities"),b=t("../../common/Parameters"),M=t("../PlacementManager"),S=t("../../common/EventManager"),o=t("../classes/AdUnit"),r=t("../MawManager"),I=t("./utils"),i=25,s=200,a=50,C={},T=[],c=window._mappingResponses=[];function l(){var t=[];try{for(;T.length&&t.length<i;){var e=T.pop();t.push(e)}if(!t.length)return;var n=b.config.rootPath+"/dfp/mapping/batch?appId="+b.config.appId+"&requests="+JSON.stringify(t)+"&h="+encodeURIComponent(w.BrowserUtils.getTopMostPageUrl());w.BrowserUtils.buildRequestByUrl(document.body,n)}catch(t){}finally{y.timeout(l,s)}}function d(){try{for(var t=function(){var t=c.pop();if(!t||!t.eid||!t.id||isNaN(t.id)||!C[t.eid])return"continue";y.timeout(function(){t.eid&&delete C[t.eid]},5e3);var e=C[t.eid],n=function(t,e){var n=e.element,e=e.windowRef||n.ownerDocument.defaultView;try{return t.scriptWindow=e||void 0,t.window=e||void 0,t.element=n,t}catch(t){return}}(t,e);if(n)if(n.dfpAdUnit=!0,e.createAdUnit){if(n.firstPrint=null!==n.element.getAttribute("iat-pub-blank")&&!n.dnr,n.firstPrint){var i=b.config.blanks&&b.config.blanks.excludedIds;if(i&&0<=i.findIndex(function(t){return t===n.id}))return"continue";"1"===n.element.getAttribute("iat-pub-blank")&&n.element.parentElement&&(n.element.parentElement.style.display=""),n.ct={"iat-pub-blank":["yes"]},t.eid}else null!==n.element.getAttribute("iat-pub-blank")&&t.eid;i=M.createAdUnit(n);n.maw&&r.MawManager.attach(n.element,n.maw,i,e.width,e.height)}else o.AdUnit.findAdhesionAndLoadDfpCreative(e.element,n)};c.length;)t()}finally{y.timeout(d,a)}}n.pushAdMappingRequest=function t(e,n,i,o,r){void 0===o&&(o=!0),void 0===r&&(r=0);var s,a,c,l,d,u,p,g,h,m=I.DfpUtils.getIntegratedAdUnitPath(e.getAdUnitPath(),b.config.integrations.dfp.networkCode);m&&(i=i||window.top,s=function(t,e){var n;n=e.self!==window.top?I.DfpUtils.getIatFrameId(e):"main";for(var i=t.getSlotId().getId().split("/").filter(function(t){return""!==t.trim()}),o=1;o<i.length;o++)n+="_"+i[o];return n}(e,i),!(d=i.document&&i.document.getElementById(e.getSlotElementId()))||(h=d.querySelector("div[id^=google_ads_iframe_][id$=container__]"))&&(a=function(t,e,n){if(!(e=e.querySelector("iframe[id$='"+t.getSlotId().getId()+"']"))||!e.style||"none"!==e.style.display)return e?((t=(t=new f.Size(parseInt(e.getAttribute("width")||"0"),parseInt(e.getAttribute("height")||"0"))).isTooSmall()?w.getElementSize(e):t).isTooSmall()&&n&&n.size&&(t=new f.Size(n.size[0],n.size[1])),b.config.device===v.DeviceType.Mobile&&t.isTooSmall()&&10<t.width&&(t.height=50),new f.Size(t.width,t.height)):new f.Size(0,0)}(e,h,n),(n||a)&&(a&&0<a.width&&a.isTooSmall()&&r<10?y.timeout(function(){return t(e,n,i,o,++r)},100):C[s]&&!function(t){return(t=t.getAttribute("TG-Zone"))&&((t=M.getAdUnit(t))&&!((t=t.getCurrentEntry())&&!t.mawId))}(h)||(c=function(e){var t=b.config.blanks;return void 0!==(t&&t.sizes&&t.sizes.map(function(t){return t.split("x").map(function(t){return parseInt(t)})})||[]).find(function(t){return t[0]===e.width&&t[1]===e.height})}(u=(u=a)||new f.Size(0,0)),(l=0!==u.width||0!==u.height||c?c?1:2:0)?(g=1==l,!(u=e.getResponseInformation())&&g&&(p="none"===d.style.display,h.setAttribute("iat-pub-blank",p?"1":"0")),c=!g&&u&&!u.lineItemId,l=g||c||!u?void 0:u.campaignId,d=g||c||!u?void 0:u.lineItemId,p=g||c||!u?void 0:u.advertiserId,u=e.getTargeting("tgRotSlot"),g={eaup:m,eoid:l||void 0,eolid:d||void 0,advid:p||void 0,ct:(p=function(i,e,o){var t=b.config.integrations.dfp;if((t=t&&t.keyValues)&&t.length){var r={},n=["iat-slot-sizes","iat-served-size"];return t.filter(function(e){return 0<=n.findIndex(function(t){return t===e})}).forEach(function(t){switch(t){case"iat-slot-sizes":r[t]=i.getSizes().map(function(t){return t.getWidth()+"x"+t.getHeight()});break;case"iat-served-size":e=e||new f.Size(0,0),r[t]=[e.toString()]}}),t.filter(function(e){return n.findIndex(function(t){return t===e})<0}).forEach(function(e){var t=i.getTargeting(e);t&&t.length&&(r[e]=t);var n=o.googletag.pubads();(t=n.getTargetingKeys().filter(function(t){return t===e&&!r[e]}))&&t.length&&n.getTargeting(t[0])&&(r[e]=n.getTargeting(t[0]))}),r}}(e,a,i))?encodeURIComponent(JSON.stringify(p).replace(new RegExp('"',"g"),"'")):void 0,w:g||!a?void 0:a.width,h:g||!a?void 0:a.height,tgRotSlot:0<u.length?u[0]:void 0,isda:c||void 0,isb:g||void 0,eId:s},C[s]={element:h,createAdUnit:o,width:g.w,height:g.h,windowRef:i},T.push(g)):(h=h.getAttribute("TG-Zone"))&&S.emit(24,h)))))},n.start=function(){y.timeout(l,s),y.timeout(d,a)}},{"../../common/EventManager":4,"../../common/Parameters":6,"../../common/Timers":7,"../../common/Utilities":8,"../../interfaces/Configuration":9,"../../interfaces/Enums":10,"../MawManager":21,"../PlacementManager":23,"../classes/AdUnit":27,"./utils":33}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DfpUtils=void 0;var s=t("../../common/Utilities");function a(t){if(!t||!t.googletag||!t.googletag.pubadsReady)return!1;t=t.googletag.pubads;return!("function"!=typeof t||!t())&&!("function"!=typeof t().getSlots||!t().getSlots())}function r(t){return-1<t.indexOf("[[")&&-1<t.indexOf("]]")}(n=n.DfpUtils||(n.DfpUtils={})).isGptAvailable=a,n.getFramesWithGpt=function(){for(var t,e,n=[],i=window.frames,o=0;o<i.length;o++)try{var r=i[o];a(r)&&(n.push(r),t=r,e=void 0,e=s.CryptoUtils.generateIatFrameId(),t.frameElement&&t.frameElement.setAttribute("iat-fid",e))}catch(t){}return n},n.getIatFrameId=function(t){return t.frameElement&&t.frameElement.getAttribute("iat-fid")||""},n.getGptWindow=function(t){return t.googletag?t:t.parent.googletag?t.parent:t.top},n.getSlotId=function(t){return(t.getAttribute("id")||"").replace("google_ads_iframe_","").replace("__container__","")},n.getIntegratedAdUnitPath=function(t,e){return(t=t.split("/").filter(function(t){return""!==t.trim()}))[0].split(",").some(function(t){return t===e})?(t[0]=e,"/"+t.join("/")):null},n.getFinalSlotPath=function(t){if(t&&""!==t.trim()){if(r(t)){for(var e=t.split("/").filter(function(t){return""!==t.trim()}),n=0;n<e.length;n++){var i,o=e[n];r(o)&&((i=o.replace("[[","").replace("]]","").toUpperCase()).startsWith("LEVEL")&&(o=function(i){if(!window.top||!a(window.top))return"";for(var o=window.top.googletag.pubads().getSlots(),t=0;t<o.length;t++){var e=function(t){var e=o[t].getAdUnitPath().split("/").filter(function(t){return""!==t.trim()});if(i.startsWith("-")){t=parseInt(i.substr(1));if(e.length>t)return{value:e[t]}}if(i.startsWith(">")){var n=parseInt(i.substr(1))+1;if(e.length>n)return{value:e.filter(function(t,e){return n<=e}).join("/")}}}(t);if("object"==typeof e)return e.value}return""}(i.replace("LEVEL",""))),e[n]=o)}t="/"+e.join("/")}return t=!t.startsWith("/")?"/"+t:t}},n.getFinalTargetingMap=function(i){return a(window.top)&&Object.keys(i).filter(r).forEach(function(t){var e=t.replace("[[","").replace("]]",""),n=window.top.googletag.pubads();0<n.getTargeting(e).length?i[e]=n.getTargeting(e):(n=0<n.getSlots().length&&n.getSlots()[0])&&(i[e]=n.getTargeting(e)),delete i[t]}),i},n.loadGptAndCreateSlotDiv=function(o,r){var t=s.BrowserUtils.getScriptElement("https://securepubads.g.doubleclick.net/tag/js/gpt.js");t.onload=function(){var t=o.googletag||{};t.cmd=t.cmd||[];var e,n,i,n=(e=o,n="div-gpt-ad-"+ +new Date+"-0",(i=e.document.createElement("div")).setAttribute("id",n),e.document.getElementsByTagName("body")[0].appendChild(i),n);r(t,n)},o.document.getElementsByTagName("head")[0].appendChild(t)},n.passback=function(t){t.postMessage("TG-SP","*")}},{"../../common/Utilities":8}],34:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PotentialMessage=n.StatusMessage=n.BaseMessage=void 0;var r=t("../../common/Utilities"),s=t("../../common/Parameters"),a=(c.prototype.addField=function(t){this.fields[this.fields.length]=t},c.prototype.toString=function(){return this.fields.join(c.separator)},c.prototype.getAction=function(t){switch(t){case 0:return"snap";case 1:return"pimp";case 2:return"pvimp";case 3:return"ptgi";case 4:return"rrptgi"}},c.separator="|",c);function c(t,e,n){this.fields=[],this.addField(r.StringUtils.padRight(this.getAction(t),6)),this.addField(r.StringUtils.padRight(e.toString(),6)),this.addField(s.config.g_country),this.addField(n.toString())}n.BaseMessage=a;var l,t=(o(d,l=a),d);function d(t,e,n){e=l.call(this,0,t,e)||this;return e.addField(n.tracking.join(",")),e.addField(n.adUnits.join(",")),e.addField(n.creatives.join(",")),e.addField(n.lines.join(",")),e.addField(n.slots.join(",")),e.addField(""),e.addField(n.state.valueOf().toString()),e}n.StatusMessage=t;var u,a=(o(p,u=a),p);function p(t,e,n){e=u.call(this,n.type,t,e)||this;return e.addField(n.id),e.addField(n.isTracking?"1":"0"),n.rules&&(e.addField(n.rules.type),e.addField(n.rules.ruleIds.join(","))),e}n.PotentialMessage=a},{"../../common/Parameters":6,"../../common/Utilities":8}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MultiplierDemo=void 0;var r=t("./Messages"),s=t("../../interfaces/Enums"),a=t("../../common/Utilities"),c=t("./RealtimeMessaging"),t=(l.start=function(t){this.instance=new l(t)},l.sendMessage=function(t){if(void 0===t&&(t=0),this.instance&&0!==this.instance.secondaryConnections.length&&this.instance.secondaryData){var e,n,i,o=this.instance.secondaryData;n=0===t?(i={state:(e=.5<=Math.random()?1:0)?s.BrowserState.Active:s.BrowserState.Inactive,adUnits:o.adUnitIds.map(function(t){return t+":00:"+e}),tracking:o.trackingUnitIds.map(function(t){return t+":00:"+e}),creatives:[],lines:[],slots:o.adUnitIds.map(function(t){return 0})},new r.StatusMessage(o.applicationId,o.sectionId,i)):(i={type:t,id:((i=.5<=Math.random())?o.trackingUnitIds:o.adUnitIds)[0].toString(),isTracking:i},4===t&&(i.rules={type:"dfp",ruleIds:o.rotationRuleIds}),new r.PotentialMessage(o.applicationId,o.sectionId,i));try{this.instance.secondaryConnections.forEach(function(t){t.isConnected()&&t.send(n.toString())})}catch(t){}}},l.handleMessage=function(t){var e;a.Cookies.readCookie(a.Cookies.RealtimeMultiplierCookieName)||(e=t.duration,t.action=t.duration=t.targeting=void 0,a.Cookies.createCookie(a.Cookies.RealtimeMultiplierCookieName,JSON.stringify(t),e),this.startConnections(t))},l.checkConnections=function(){var t=a.Cookies.readCookie(a.Cookies.RealtimeMultiplierCookieName);t&&(t=JSON.parse(t),this.startConnections(t))},l.startConnections=function(e){var t=this;if(this.instance.secondaryData=e,0===this.instance.secondaryConnections.length)for(var n=0;n<e.multiplier;n++){var i=l.instance.realtimeProvider.createInstance();this.instance.secondaryConnections.push(i)}this.instance.secondaryConnections.forEach(function(t){t.isConnected()||t.connect(c.RealtimeMessaging.getHubUrl(e.applicationId,e.hosts))});var o=window.setInterval(function(){a.Cookies.readCookie(a.Cookies.RealtimeMultiplierCookieName)||(t.stopConnections(),window.clearInterval(o))},5e3)},l.stopConnections=function(){this.instance.secondaryConnections.forEach(function(t){t.disconnect()})},l);function l(t){this.realtimeProvider=t,this.secondaryConnections=[]}n.MultiplierDemo=t},{"../../common/Utilities":8,"../../interfaces/Enums":10,"./Messages":34,"./RealtimeMessaging":36}],36:[function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||((i=i||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(n,"__esModule",{value:!0}),n.RealtimeMessaging=void 0;var o=t("./Messages"),r=t("../../common/EventManager"),s=t("../../common/Utilities"),a=t("../../common/Parameters"),c=t("../../common/Logging"),l=t("./MultiplierDemo"),d=t("../API"),t=(u.start=function(t){var e=this;void 0===t&&(t=!1),u.instance=u.instance||new u,u.realtimeProvider=u.realtimeProvider||d.get(d.ApiModule.RealtimeProvider),u.realtimeProvider?a.config.messagingEnabled&&(u.instance.primaryConnection=u.realtimeProvider.createInstance(),u.instance.waitForEndpoint(t,function(){return u.instance.initialize()}),l.MultiplierDemo.start(u.realtimeProvider)):setTimeout(function(){return e.start()},100)},Object.defineProperty(u,"isForcedDisconnected",{get:function(){return u.instance._forceDisconnect},enumerable:!1,configurable:!0}),u.connect=function(){if(u.instance.isReady)try{u.instance._forceDisconnect=!1,u.instance.primaryConnection.isConnected()||u.instance.primaryConnection.connect(u.getHubUrl())}catch(t){u.instance.errorLog(t)}},u.disconnect=function(){try{u.instance.primaryConnection.disconnect(),u.instance._forceDisconnect=!0}catch(t){u.instance.errorLog(t)}},u.getHubUrl=function(t,e){var n=u.instance.finalMessagingPath;return t?e&&0<e.length&&(n=e[Math.round(Math.random()*(e.length-1))]):t=a.config.appId,n&&n.toLowerCase().startsWith("https://")?n+"/hub?appId="+t+"&dev="+a.config.d_type+"&br="+a.config.d_browser+"&os="+a.config.d_os+"&cc="+a.config.g_country+"&rc="+a.config.g_region+"&v="+u.version:""},u.sendStatusUpdate=function(t){u.instance.flushQueue(),u.instance.sendMessage(new o.StatusMessage(a.config.appId,a.config.section,t),!1),l.MultiplierDemo.sendMessage()},u.sendPotentialLog=function(t){u.instance.flushQueue(),u.instance.sendMessage(new o.PotentialMessage(a.config.appId,a.config.section,t),!0),l.MultiplierDemo.sendMessage(t.type)},u.prototype.sendMessage=function(e,n){var i=this;try{return this._isConnected?this.primaryConnection.send(e.toString()).then(function(t){r.emit(10,e)}).catch(function(t){n&&i._messageBuffer.push(e)}):void(n&&!this._forceDisconnect&&this._messageBuffer.push(e))}catch(t){this.errorLog(t)}},u.prototype.flushQueue=function(){var t,e=this;this._isConnected&&0!==this._messageBuffer.length&&(t=i([],this._messageBuffer,!0),this._messageBuffer=[],t.forEach(function(t){e.sendMessage(t,!0)}))},u.prototype.updateEndpointAndResume=function(t,e){this.finalMessagingPath=t,this.isReady=!0,e()},u.prototype.waitForEndpoint=function(t,e){var n=this;try{if(!t&&a.config.messagingPath!==a.config.defaultMessagingPath)return void this.updateEndpointAndResume(a.config.messagingPath,e);var i=s.BrowserUtils.getScriptElement(a.config.defaultMessagingPath+"/messaging/endpoint");i.onload=function(){window.websocket_server&&n.updateEndpointAndResume(window.websocket_server,e)},document.getElementsByTagName("head")[0].appendChild(i)}catch(t){}},u.prototype.isTargeted=function(t){if(t.version&&t.version!==a.config.version&&""!==a.config.version)return!1;if(t.targeting&&t.targeting.geo){var e=t.targeting.geo.countryCode&&a.config.g_country!==t.targeting.geo.countryCode,t=t.targeting.geo.regionCode&&a.config.g_region!==t.targeting.geo.regionCode;if(e||t)return!1}return!0},u.prototype.handleReconnect=function(t){u.disconnect(),t.messagingPath?(a.config.messagingPath=t.messagingPath,u.start()):u.start(!0)},u.prototype.handleUpdateVersion=function(){try{window.location.reload()}catch(t){}},u.prototype.initialize=function(){var e=this;try{this.primaryConnection.onConnect=this.onConnect,this.primaryConnection.onFailedConnect=this.onFailedConnect,this.primaryConnection.onDisconnect=this.onDisconnect,this.primaryConnection.onReceiveMessage=this.receiveMessage,this.primaryConnection.onLogMessage=function(t){return e.errorLog(t)},this.primaryConnection.connect(u.getHubUrl())}catch(t){this.errorLog(t)}},u.prototype.errorLog=function(t){t=t&&t.message?t.message:t;c.info(t,"RealtimeMessaging")},u.version="0.2",u);function u(){var n=this;this.isReady=!1,this._messageBuffer=[],this.receiveMessage=function(t){try{var e=JSON.parse(t);switch(e.action){case"tgiNotice":r.emit(14,e);break;case"realtime-delivery":r.emit(15,e);break;case"realtime-reconnect":n.handleReconnect(e);break;case"update-version":n.isTargeted(e)&&n.handleUpdateVersion();break;case"show-square":n.isTargeted(e)&&r.emit(16,e);break;case"rotate-ads":n.isTargeted(e)&&r.emit(17,e);break;case"realtime-multiplier":n.isTargeted(e)&&l.MultiplierDemo.handleMessage(e)}}catch(t){}},this.onConnect=function(){n._isConnected=!0,r.emit(12,+new Date),l.MultiplierDemo.checkConnections()},this.onFailedConnect=function(){u.start(!0)},this.onDisconnect=function(){n._isConnected=!1,r.emit(13,+new Date),l.MultiplierDemo.stopConnections()}}n.RealtimeMessaging=t},{"../../common/EventManager":4,"../../common/Logging":5,"../../common/Parameters":6,"../../common/Utilities":8,"../API":11,"./Messages":34,"./MultiplierDemo":35}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TcfIntegration=void 0;var i=t("../../interfaces/Enums"),o=window.__tgconf.tcData;function r(t){return o.vendor&&o.vendor.consents&&0!==Object.keys(o.vendor.consents).length&&0!==Object.keys(o.purpose.consents).length&&o.vendor.consents[t]||!1}s.gdprApplies=function(){return o&&o.gdprApplies},s.isAllowed=function(t){if(!o||!o.gdprApplies)return!0;switch(+t){case i.TCFVendors.Google:return r(i.TCFVendors.Google)&&(e=[1],Object.keys(o.purpose.consents).filter(function(t){return-1!==e.indexOf(+t)}).reduce(function(t,e){return t[e]=o.purpose.consents[e],t},[]).every(function(t){return t}))&&o.isServiceSpecific;case i.TCFVendors.Amazon:return r(i.TCFVendors.Amazon);default:return!1}var e},t=s;function s(){}n.TcfIntegration=t},{"../../interfaces/Enums":10}]},{},[3]);